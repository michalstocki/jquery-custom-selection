/*! jquery-custom-selection - v0.4.3 - 2014-11-03 */
!function(a){function b(a){Ub=a[0].ownerDocument,Tb=m(a[0])}function c(a){Eb=new Hammer.Manager(a[0],{recognizers:[[Hammer.Press],[Hammer.Tap]]}),Eb.set({holdThreshold:Cb.holdThreshold,holdTimeout:Cb.holdTimeout})}function d(b){c(b),a(Lb).add(Mb).on("touchstart",i),a(l(Lb)).on("touchmove",j).on("touchend",k),b.on("touchend",g),Eb.on("press",f),Eb.on("tap",s)}function e(b){a(l(Lb)).off("touchmove",j).off("touchend",k),b.off("touchend",g),Eb.destroy()}function f(a){a.srcEvent.preventDefault(),a.srcEvent.stopPropagation(),q(a)}function g(a){Sb&&(a.preventDefault(),Sb=!1)}function h(a){a.preventDefault(),Qb=H(a.originalEvent),Kb.requestFrame(function(){var a=M(Qb),b=Z(Qb,a);r(b)})}function i(a){a.preventDefault(),C(a.target),F(),Xb=n()}function j(a){Wb&&(h(a),Sb=!0)}function k(){Wb&&(D(),Xb=null),G()}function l(a){return a.ownerDocument.body}function m(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function n(){return Wb===Lb?gb(Vb):fb(Vb)}function o(b){var c=a(b);Yb=c.css("user-select"),c.css("user-select","none")}function p(b){a(b).css("user-select",Yb)}function q(a){var b=L(a);if(!B(b)){s();var c=I(a,{shift:!1}),d=U(b,c);r(d),G(),Sb=!0}}function r(a){a&&(x(a)&&(Vb=a,u(),Cb.onSelectionChange(Vb)),P())}function s(){z(Vb)&&(O(),Nb.clearSelection(),Cb.onSelectionChange(Ub.createRange())),Vb=null}function t(){u()}function u(){z(Vb)&&(Nb.redraw(Vb),y(Vb))}function v(a){return 0!==Vb.compareBoundaryPoints(Range.END_TO_END,a)}function w(a){return 0!==Vb.compareBoundaryPoints(Range.START_TO_START,a)}function x(a){return!Vb||v(a)||w(a)}function y(b){var c=b.getClientRects(),d=c[0],e=c[c.length-1];a(Lb).css({top:R(d.bottom),left:Q(d.left)}),a(Mb).css({top:R(e.bottom),left:Q(e.right)})}function z(a){return!!a&&!!a.getBoundingClientRect()&&a.getClientRects().length>0}function A(b){Lb=a(Cb.startMarker)[0]||N(b,Gb),Mb=a(Cb.endMarker)[0]||N(b,Hb),O()}function B(a){return a===Lb||a===Mb}function C(b){Wb=b,a(Wb).addClass(Ib)}function D(){a(Wb).removeClass(Ib),Wb=null}function E(){a(Wb).removeClass(Ib),Wb=Wb===Lb?Mb:Lb,a(Wb).addClass(Ib)}function F(){a(Lb).add(Mb).css("pointer-events","none")}function G(){a(Lb).add(Mb).css("pointer-events","auto")}function H(a){var b=I(a);return S()&&(b.translate(J()),b.scale(K())),b}function I(a,b){return new CustomSelection.Lib.Point(a,b)}function J(){var a=Cb.contextOrigin;return{x:-a.offsetX,y:-a.offsetY}}function K(){return 1/Cb.contextOrigin.scale}function L(a){var b=a.touches||a.pointers||[a];return b[0].target}function M(a){O();var b=Ub.elementFromPoint(a.clientX,a.clientY);return b||(b=Ub.body),P(),b}function N(a,b){var c=Ub.createElement("div");return c.setAttribute("class",Fb+" "+b),c.setAttribute("style","position: absolute;"),a.append(c),c}function O(){a(Lb).add(Mb).css({visibility:"hidden"})}function P(){a(Lb).add(Mb).css({visibility:"visible"})}function Q(a){return a*Cb.contextOrigin.scale+Cb.contextOrigin.offsetX}function R(a){return a*Cb.contextOrigin.scale+Cb.contextOrigin.offsetY}function S(){return!(Db.isAndroidLowerThanKitkat&&Db.isAndroidStackBrowser)}function T(){var a=new CustomSelection.Lib.EnvironmentChecker;return{isWebkit:a.isWebkit(),isAppleDevice:a.isAppleDevice(),isAndroidLowerThanKitkat:a.isAndroidLowerThan("4.4"),isAndroidStackBrowser:a.isAndroidStackBrowser()}}function U(a,b){var c,d=null;return(c=hb(a,b))&&(d=cb(c,b),V(d),W(d)),d}function V(a){for(;!X(a);){if(a.startOffset<1)return;a.setStart(a.startContainer,a.startOffset-1)}a.setStart(a.startContainer,a.startOffset+1)}function W(a){for(var b=Math.max(a.endContainer.data.length,0);!Y(a);){if(a.endOffset>=b)return;a.setEnd(a.endContainer,a.endOffset+1)}a.setEnd(a.endContainer,a.endOffset-1)}function X(a){return a.toString().charCodeAt(0)in Rb}function Y(a){var b=a.toString();return b.charCodeAt(b.length-1)in Rb}function Z(a,b){var c=Vb.cloneRange(),d=ab(b,a);if(d){var e=$(d),f=_();e.applyTo(c),c.collapsed&&(f.applyTo(c),e.applyOppositeTo(c),E())}return c}function $(a){return Wb===Lb?db(a):eb(a)}function _(){return $(n())}function ab(a,b){var c,d=null;return(c=bb(a,b))?d=fb(c):(c=qb(a,b))&&(d=gb(c)),d}function bb(a,b){var c=hb(a,b),d=null;return c&&(d=cb(c,b)),d}function cb(a,b){for(var c=Ub.createRange(),d=0,e=a.data.length;e>d;){var f=d+e>>1;c.setStart(a,d),c.setEnd(a,f+1),ib(c,b)?e=f:(d=f+1,c.setStart(a,d),c.setEnd(a,e))}return c}function db(a){return new CustomSelection.Lib.StartBoundary(a)}function eb(a){return new CustomSelection.Lib.EndBoundary(a)}function fb(a){return{container:a.startContainer,offset:a.startOffset}}function gb(a){return{container:a.endContainer,offset:a.endOffset}}function hb(a,b){if(a)for(var c,d=a.childNodes,e=0;c=d[e++];)if(ob(c)&&jb(c,b))return c;return null}function ib(a,b){for(var c,d=a.getClientRects(),e=0;c=d[e++];)if(lb(c,b))return!0;return!1}function jb(a,b){for(var c,d=kb(a),e=0;c=d[e++];)if(lb(c,b))return!0;return!1}function kb(a){var b=Ub.createRange();return b.selectNode(a),b.getClientRects()}function lb(a,b){return mb(a,b)&&nb(a,b)}function mb(a,b){var c=Db.isAppleDevice?b.pageY:b.clientY;return c>a.top&&c<a.bottom}function nb(a,b){var c=Db.isAppleDevice?b.pageX:b.clientX;return c>=a.left&&c<=a.right}function ob(a){return a.nodeType===Node.TEXT_NODE&&a.length>0}function pb(a){return a.childNodes.length>0}function qb(a,b){var c=null,d=ub({point:b,getBetterRect:vb,getBestRectFromNode:wb}),e=ub({point:b,getBetterRect:Ab,getBestRectFromNode:Bb}),f=sb(a,d)||sb(a,e);return f&&(c=zb(),rb(null,null)),c}function rb(a,b){Ob=a,Pb=b}function sb(a,b){for(var c,d=a;c=tb(d,b);){if(ob(c))return c;d=c}}function tb(a,b){var c=null;if(a)for(var d,e=a.childNodes,f=0;d=e[f++];){var g;(g=kb(d))&&g.length&&(pb(d)||ob(d))&&(c=b(c,d))}return c}function ub(a){var b=a.point,c=a.getBetterRect,d=a.getBestRectFromNode;return function(a,e){var f=a,g=d(e,b);if(a){var h=d(a,b);xb(g,h)&&c(g,h)===g&&(f=e,rb(e,g))}else g&&(f=e,rb(e,g));return f}}function vb(a,b){return a.right>b.right?a:b.right>a.right?b:null}function wb(a,b){for(var c,d=kb(a),e=null,f=0;c=d[f++];)yb(c,b)&&(!e||c.right>e.right)&&(e=c);return e}function xb(a,b){return a&&b&&a!==b}function yb(a,b){var c=b.clientX,d=b.clientY;return a.right<c&&a.top<=d&&a.bottom>=d}function zb(){var a=kb(Ob),b=a[a.length-1];if(Pb===b){var c=document.createRange();return c.selectNode(Ob),c}var d={clientX:Pb.right-1,clientY:Pb.bottom-1};return cb(Ob,d)}function Ab(a,b){return a.top>=b.top?a:b.top>=a.top?b:null}function Bb(a,b){for(var c,d=b.clientY,e=kb(a),f=null,g=0;c=e[g++];)c.top<d&&(!f||c.top>=f.top)&&(f=c);return f}var Cb,Db,Eb,Fb="jcs-marker",Gb="jcs-beginning-marker",Hb="jcs-end-marker",Ib="jcs-marker-moving",Jb={holdThreshold:4,holdTimeout:500,onSelectionChange:function(){},contextOrigin:{offsetX:0,offsetY:0,scale:1}},Kb=null,Lb=null,Mb=null,Nb=null;window.CustomSelection={Lib:{}},a.fn.customSelection=function(c){return Cb=a.extend(Jb,c),b(this),Db=Db||T(),Kb=new CustomSelection.Lib.FrameRequester,Nb=new CustomSelection.Lib.SelectionDrawer({$element:this,environment:Db,contextWindow:Tb,contextDocument:Ub,fillStyle:Cb.selectionColor}),A(this),o(Ub.body),d(this),this},a.fn.refreshCustomSelection=function(a){return a&&(Cb.contextOrigin=a),t(),this},a.fn.clearCustomSelection=function(){return s(),this},a.fn.disableCustomSelection=function(){return s(),p(Ub.body),e(this),this};var Ob,Pb,Qb=null,Rb={32:" ",9:"	",13:"\r",10:"\n"},Sb=!1,Tb=null,Ub=null,Vb=null,Wb=null,Xb=null,Yb=null}(jQuery),function(a){"use strict";function b(a){this._container=a.container,this._offset=a.offset}function c(){b.apply(this,arguments)}function d(){b.apply(this,arguments)}c.prototype=Object.create(b.prototype),c.prototype.applyTo=function(a){a.setStart(this._container,this._offset)},c.prototype.applyOppositeTo=function(a){a.setEnd(this._container,this._offset)},a.CustomSelection.Lib.StartBoundary=c,d.prototype=Object.create(b.prototype),d.prototype.applyTo=function(a){a.setEnd(this._container,this._offset)},d.prototype.applyOppositeTo=function(a){a.setStart(this._container,this._offset)},a.CustomSelection.Lib.EndBoundary=d}(this),function(a){"use strict";function b(){this.userAgent=a.navigator.userAgent}function c(b){return b.exec(a.navigator.userAgent)}function d(b){return b.test(a.navigator.userAgent)}b.prototype.isAppleDevice=function(){return d(/(iPad|iPhone|iPod)/g)},b.prototype.isAndroidStackBrowser=function(){return this.isAndroid()&&d(/Version\/\d\.\d/g)},b.prototype.isAndroidLowerThan=function(a){if(!this.isAndroid())return!1;var b=a.split("."),d=Number(b[0]),e=Number(b[1]),f=c(/Android (\d)\.(\d)/g),g=Number(f[1]),h=Number(f[2]);return d>g||g===d&&e>h},b.prototype.isAndroid=function(){return d(/Android/g)},b.prototype.isWebkit=function(){return d(/WebKit/g)},a.CustomSelection.Lib.EnvironmentChecker=b}(this),function(a){"use strict";function b(){this._ticking=!1}b.prototype.requestFrame=function(a){this._ticking||window.requestAnimationFrame(function(){a(),this._ticking=!1}.bind(this)),this._ticking=!0},a.CustomSelection.Lib.FrameRequester=b}(this),function(a){"use strict";function b(a,b){var e=$.extend({},c,b),f=a.touches||a.pointers,g=f[0];this.clientX=g.clientX,this.clientY=g.clientY,this.pageX=g.pageX,this.pageY=g.pageY,e.shift&&(this.clientY+=d,this.pageY+=d)}var c={shift:!0},d=-32;b.prototype.translate=function(a){this.clientX+=a.x,this.clientY+=a.y,this.pageX+=a.x,this.pageY+=a.y},b.prototype.scale=function(a){this.clientX*=a,this.clientY*=a,this.pageX*=a,this.pageY*=a},a.CustomSelection.Lib.Point=b}(this),function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),function(a){"use strict";function b(a){p=a,q=p.environment,c()}function c(){g(),o=n.getContext("2d")}function d(a){var b=a.getBoundingClientRect(),c=h(a),d=.5,e=d-b.left,f=d-b.top;o.save(),o.translate(e,f),o.beginPath(),c.forEach(function(a){o.rect(a.left,a.top,a.width,a.height)}),o.closePath(),o.fillStyle=p.fillStyle,o.fill(),o.restore()}function e(){return t?0:$(p.contextWindow).scrollTop()}function f(a){a=a||{top:0,left:0,width:0,height:0},n.style.top=a.top+e()+"px",n.style.left=a.left+"px",n.width=a.width,n.height=a.height}function g(){n=p.contextDocument.createElement("canvas"),n.className=r,$(n).css(s),n.width=0,n.height=0,p.$element[0].appendChild(n)}function h(a){var b=[].slice.call(a.getClientRects());return q.isWebkit&&!q.isAppleDevice&&(b=i(b)),b}function i(a){var b=a[a.length-1];return a.filter(function(c){return!(j(c,b)||k(c,a))})}function j(a,b){var c=1;return a.bottom===b.bottom&&a.right-b.right>c}function k(a,b){for(var c=0;c<b.length;c++)if(l(a,b[c]))return!0;return!1}function l(a,b){var c=a,d=b;return!m(c,d)&&c.top<=d.top&&c.right>=d.right&&c.bottom>=d.bottom&&c.left<=d.left&&d.height>0&&d.width>0}function m(a,b){return a===b||a.left===b.left&&a.right===b.right&&a.height===b.height&&a.width===b.width}var n,o,p,q,r="custom-selection-canvas",s={position:"absolute","pointer-events":"none","z-index":-1},t=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1;b.prototype.redraw=function(a){f(a.getBoundingClientRect()),d(a)},b.prototype.clearSelection=function(){f()},a.CustomSelection.Lib.SelectionDrawer=b}(this);
//# sourceMappingURL=jquery.custom-selection.min.map