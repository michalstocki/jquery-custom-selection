/*! jquery-custom-selection - v0.5.0 - 2014-11-12 */
!function(a){function b(a){ac=a[0].ownerDocument,_b=m(a[0])}function c(a){Mb=new Hammer.Manager(a[0],{recognizers:[[Hammer.Press],[Hammer.Tap]]}),Mb.set({holdThreshold:Kb.holdThreshold,holdTimeout:Kb.holdTimeout})}function d(b){c(b),a(Tb).add(Ub).on("touchstart",i),a(l(Tb)).on("touchmove",j).on("touchend",k),b.on("touchend",g),Mb.on("press",f),Mb.on("tap",s)}function e(b){a(l(Tb)).off("touchmove",j).off("touchend",k),b.off("touchend",g),Mb.destroy()}function f(a){a.srcEvent.preventDefault(),a.srcEvent.stopPropagation(),q(a)}function g(a){$b&&(a.preventDefault(),$b=!1)}function h(a){a.preventDefault(),Yb=H(a.originalEvent),Sb.requestFrame(function(){var a=M(Yb),b=bb(Yb,a);r(b)})}function i(a){a.preventDefault(),C(a.target),F(),dc=n()}function j(a){cc&&(h(a),$b=!0)}function k(){cc&&(D(),dc=null),G()}function l(a){return a.ownerDocument.body}function m(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function n(){return cc===Tb?kb(bc):jb(bc)}function o(b){var c=a(b);ec=c.css("user-select"),c.css("user-select","none")}function p(b){a(b).css("user-select",ec)}function q(a){var b=L(a);if(!B(b)){s();var c=I(a),d=U(b,c);r(d),G(),$b=!0}}function r(a){a&&(x(a)&&(bc=a,u(),Kb.onSelectionChange(bc)),P())}function s(){z(bc)&&(O(),Vb.clearSelection(),Kb.onSelectionChange(ac.createRange())),bc=null}function t(){u()}function u(){z(bc)&&(Vb.redraw(bc),y(bc))}function v(a){return 0!==bc.compareBoundaryPoints(Range.END_TO_END,a)}function w(a){return 0!==bc.compareBoundaryPoints(Range.START_TO_START,a)}function x(a){return!bc||v(a)||w(a)}function y(b){var c=b.getClientRects(),d=c[0],e=c[c.length-1];a(Tb).css({top:R(d.bottom),left:Q(d.left)}),a(Ub).css({top:R(e.bottom),left:Q(e.right)})}function z(a){return!!a&&!!a.getBoundingClientRect()&&a.getClientRects().length>0}function A(b){Tb=a(Kb.startMarker)[0]||N(b,Ob),Ub=a(Kb.endMarker)[0]||N(b,Pb),O()}function B(a){return a===Tb||a===Ub}function C(b){cc=b,a(cc).addClass(Qb)}function D(){a(cc).removeClass(Qb),cc=null}function E(){a(cc).removeClass(Qb),cc=cc===Tb?Ub:Tb,a(cc).addClass(Qb)}function F(){a(Tb).add(Ub).css("pointer-events","none")}function G(){a(Tb).add(Ub).css("pointer-events","auto")}function H(a){var b=I(a,{shiftY:-Kb.markerShiftY});return S()?b.scaleOffset(K()):(b.translate(J()),b.scale(K())),b}function I(a,b){return new CustomSelection.Lib.Point(a,b)}function J(){var a=Kb.contextOrigin;return{x:-a.offsetX,y:-a.offsetY}}function K(){return 1/Kb.contextOrigin.scale}function L(a){var b=a.touches||a.pointers||[a];return b[0].target}function M(a){O();var b=ac.elementFromPoint(a.clientX,a.clientY);return b||(b=ac.body),P(),b}function N(a,b){var c=ac.createElement("div");return c.setAttribute("class",Nb+" "+b),c.setAttribute("style","position: absolute;"),a.append(c),c}function O(){a(Tb).add(Ub).css({visibility:"hidden"})}function P(){a(Tb).add(Ub).css({visibility:"visible"})}function Q(a){return a*Kb.contextOrigin.scale+Kb.contextOrigin.offsetX}function R(a){return a*Kb.contextOrigin.scale+Kb.contextOrigin.offsetY}function S(){return Lb.isAndroidStackBrowser&&Lb.isAndroidLowerThanKitkat}function T(){var a=new CustomSelection.Lib.EnvironmentChecker;return{isWebkit:a.isWebkit(),isAppleDevice:a.isAppleDevice(),isAndroidLowerThanKitkat:a.isAndroidLowerThan("4.4"),isAndroidStackBrowser:a.isAndroidStackBrowser()}}function U(a,b){var c,d=null;return(c=lb(a,b))&&(d=gb(c,b),V(d),W(d)),d}function V(a){for(;!X(a);)if(a.startOffset>0)a.setStart(a.startContainer,a.startOffset-1);else if(!Z(a))return;a.setStart(a.startContainer,a.startOffset+1),_(a)&&a.setStart(wb(a.startContainer),0)}function W(a){for(;!Y(a);){var b=a.endContainer.data.length;if(a.endOffset<b)a.setEnd(a.endContainer,a.endOffset+1);else if(!$(a))return}a.setEnd(a.endContainer,Math.max(a.endOffset-1,0))}function X(a){return a.toString().charCodeAt(0)in Zb}function Y(a){var b=a.toString();return b.charCodeAt(b.length-1)in Zb}function Z(a){var b;return(b=xb(a.startContainer))?(a.setStart(b,b.data.length),!0):!1}function $(a){var b;return(b=wb(a.endContainer))?(a.setEnd(b,0),!0):!1}function _(a){return ab(a.startContainer)&&(a.startOffset===a.startContainer.data.length||a.startOffset===a.startContainer.data.length-1)}function ab(a){return a.data.charCodeAt(a.data.length-1)in Zb}function bb(a,b){var c=bc.cloneRange(),d=eb(b,a);if(d){var e=cb(d),f=db();e.applyTo(c),c.collapsed&&(f.applyTo(c),e.applyOppositeTo(c),E())}return c}function cb(a){return cc===Tb?hb(a):ib(a)}function db(){return cb(n())}function eb(a,b){var c,d=null;return(c=fb(a,b))?d=jb(c):(c=yb(a,b))&&(d=kb(c)),d}function fb(a,b){var c=lb(a,b),d=null;return c&&(d=gb(c,b)),d}function gb(a,b){for(var c=ac.createRange(),d=0,e=a.data.length,f=e;f>d;){var g=d+f>>1;c.setStart(a,d),c.setEnd(a,g+1),mb(c,b)?f=g:(d=g+1,c.setStart(a,d),c.setEnd(a,f))}return c.collapsed&&c.endOffset<e&&c.setEnd(a,c.endOffset+1),c}function hb(a){return new CustomSelection.Lib.StartBoundary(a)}function ib(a){return new CustomSelection.Lib.EndBoundary(a)}function jb(a){return{container:a.startContainer,offset:a.startOffset}}function kb(a){return{container:a.endContainer,offset:a.endOffset}}function lb(a,b){if(a)for(var c,d=a.childNodes,e=0;c=d[e++];)if(sb(c)&&nb(c,b))return c;return null}function mb(a,b){for(var c,d=a.getClientRects(),e=0;c=d[e++];)if(pb(c,b))return!0;return!1}function nb(a,b){for(var c,d=ob(a),e=0;c=d[e++];)if(pb(c,b))return!0;return!1}function ob(a){var b=ac.createRange();return b.selectNode(a),b.getClientRects()}function pb(a,b){return qb(a,b)&&rb(a,b)}function qb(a,b){var c=Lb.isAppleDevice?b.pageY:b.clientY;return c>a.top&&c<a.bottom}function rb(a,b){var c=Lb.isAppleDevice?b.pageX:b.clientX;return c>=a.left&&c<=a.right}function sb(a){return a.nodeType===Node.TEXT_NODE&&a.length>0}function tb(a){return a.childNodes.length>0}function ub(a){for(;!a.nextSibling;){if(a===a.ownerDocument.body)return null;a=a.parentNode}return a.nextSibling}function vb(a){for(;!a.previousSibling;){if(a===a.ownerDocument.body)return null;a=a.parentNode}return a.previousSibling}function wb(a){var b,c=a;do if(tb(c))c=c.childNodes[0];else if(c.nextSibling)c=c.nextSibling;else{if(!(b=ub(c)))return null;c=b}while(!sb(c));return c}function xb(a){var b,c=a;do if(tb(c))c=c.childNodes[c.childNodes.length-1];else if(c.previousSibling)c=c.previousSibling;else{if(!(b=vb(c)))return null;c=b}while(!sb(c));return c}function yb(a,b){var c=null,d=Cb({point:b,getBetterRect:Db,getBestRectFromNode:Eb}),e=Cb({point:b,getBetterRect:Ib,getBestRectFromNode:Jb}),f=Ab(a,d)||Ab(a,e);return f&&(c=Hb(),zb(null,null)),c}function zb(a,b){Wb=a,Xb=b}function Ab(a,b){for(var c,d=a;c=Bb(d,b);){if(sb(c))return c;d=c}}function Bb(a,b){var c=null;if(a)for(var d,e=a.childNodes,f=0;d=e[f++];){var g;(g=ob(d))&&g.length&&(tb(d)||sb(d))&&(c=b(c,d))}return c}function Cb(a){var b=a.point,c=a.getBetterRect,d=a.getBestRectFromNode;return function(a,e){var f=a,g=d(e,b);if(a){var h=d(a,b);Fb(g,h)&&c(g,h)===g&&(f=e,zb(e,g))}else g&&(f=e,zb(e,g));return f}}function Db(a,b){return a.right>b.right?a:b.right>a.right?b:null}function Eb(a,b){for(var c,d=ob(a),e=null,f=0;c=d[f++];)Gb(c,b)&&(!e||c.right>e.right)&&(e=c);return e}function Fb(a,b){return a&&b&&a!==b}function Gb(a,b){var c=b.clientX,d=b.clientY;return a.right<c&&a.top<=d&&a.bottom>=d}function Hb(){var a=ob(Wb),b=a[a.length-1];if(Xb===b){var c=document.createRange();return c.selectNode(Wb),c}var d={clientX:Xb.right-1,clientY:Xb.bottom-1};return gb(Wb,d)}function Ib(a,b){return a.top>=b.top?a:b.top>=a.top?b:null}function Jb(a,b){for(var c,d=b.clientY,e=ob(a),f=null,g=0;c=e[g++];)c.top<d&&(!f||c.top>=f.top)&&(f=c);return f}var Kb,Lb,Mb,Nb="jcs-marker",Ob="jcs-beginning-marker",Pb="jcs-end-marker",Qb="jcs-marker-moving",Rb={holdThreshold:4,holdTimeout:500,markerShiftY:38,onSelectionChange:function(){},contextOrigin:{offsetX:0,offsetY:0,scale:1}},Sb=null,Tb=null,Ub=null,Vb=null;window.CustomSelection={Lib:{}},a.fn.customSelection=function(c){return Kb=a.extend(Rb,c),b(this),Lb=Lb||T(),Sb=new CustomSelection.Lib.FrameRequester,Vb=new CustomSelection.Lib.SelectionDrawer({$element:this,environment:Lb,contextWindow:_b,contextDocument:ac,fillStyle:Kb.selectionColor,markerShiftY:Kb.markerShiftY}),A(this),o(ac.body),d(this),this},a.fn.refreshCustomSelection=function(a){return a&&(Kb.contextOrigin=a),t(),this},a.fn.clearCustomSelection=function(){return s(),this},a.fn.disableCustomSelection=function(){return s(),p(ac.body),e(this),this};var Wb,Xb,Yb=null,Zb={32:" ",9:"	",13:"\r",10:"\n"},$b=!1,_b=null,ac=null,bc=null,cc=null,dc=null,ec=null}(jQuery),function(a){"use strict";function b(a){this._container=a.container,this._offset=a.offset}function c(){b.apply(this,arguments)}function d(){b.apply(this,arguments)}c.prototype=Object.create(b.prototype),c.prototype.applyTo=function(a){a.setStart(this._container,this._offset)},c.prototype.applyOppositeTo=function(a){a.setEnd(this._container,this._offset)},a.CustomSelection.Lib.StartBoundary=c,d.prototype=Object.create(b.prototype),d.prototype.applyTo=function(a){a.setEnd(this._container,this._offset)},d.prototype.applyOppositeTo=function(a){a.setStart(this._container,this._offset)},a.CustomSelection.Lib.EndBoundary=d}(this),function(a){"use strict";function b(){this.userAgent=a.navigator.userAgent}function c(b){return b.exec(a.navigator.userAgent)}function d(b){return b.test(a.navigator.userAgent)}b.prototype.isAppleDevice=function(){return d(/(iPad|iPhone|iPod)/g)},b.prototype.isAndroidStackBrowser=function(){return this.isAndroid()&&d(/Version\/\d\.\d/g)},b.prototype.isAndroidLowerThan=function(a){if(!this.isAndroid())return!1;var b=a.split("."),d=Number(b[0]),e=Number(b[1]),f=c(/Android (\d)\.(\d)/g),g=Number(f[1]),h=Number(f[2]);return d>g||g===d&&e>h},b.prototype.isAndroid=function(){return d(/Android/g)},b.prototype.isWebkit=function(){return d(/WebKit/g)},a.CustomSelection.Lib.EnvironmentChecker=b}(this),function(a){"use strict";function b(){this._ticking=!1}b.prototype.requestFrame=function(a){this._ticking||window.requestAnimationFrame(function(){a(),this._ticking=!1}.bind(this)),this._ticking=!0},a.CustomSelection.Lib.FrameRequester=b}(this),function(a){"use strict";function b(a,b){this._settings=$.extend({},c,b);var d=a.touches||a.pointers,e=d[0];this.clientX=e.clientX,this.clientY=e.clientY+this._settings.shiftY,this.pageX=e.pageX,this.pageY=e.pageY+this._settings.shiftY}var c={shiftY:0};b.prototype.translate=function(a){this.clientX+=a.x,this.clientY+=a.y,this.pageX+=a.x,this.pageY+=a.y},b.prototype.scale=function(a){this.clientX*=a,this.clientY*=a,this.pageX*=a,this.pageY*=a},b.prototype.scaleOffset=function(a){var b=this._settings.shiftY;this.clientY=this.clientY-b+b*a,this.pageY=this.pageY-b+b*a},a.CustomSelection.Lib.Point=b}(this),function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),function(a){"use strict";function b(a){p=a,q=p.environment,c()}function c(){g(),o=n.getContext("2d")}function d(a){var b=a.getBoundingClientRect(),c=h(a),d=.5,e=d-b.left,f=d-b.top;o.save(),o.translate(e,f),o.beginPath(),c.forEach(function(a){o.rect(a.left,a.top,a.width,a.height)}),o.closePath(),o.fillStyle=p.fillStyle,o.fill(),o.restore()}function e(){return t?0:$(p.contextWindow).scrollTop()}function f(a){a=a||{top:0,left:0,width:0,height:0},n.style.top=a.top+e()+"px",n.style.left=a.left+"px",n.width=a.width,n.height=a.height}function g(){n=p.contextDocument.createElement("canvas"),n.className=r,$(n).css(s),n.width=0,n.height=0,p.$element[0].appendChild(n)}function h(a){var b=[].slice.call(a.getClientRects());return q.isWebkit&&(b=i(b)),b}function i(a){var b=a[a.length-1];return a.filter(function(c){return!(j(c,b)||k(c,a))})}function j(a,b){var c=1;return a.bottom===b.bottom&&a.right-b.right>c}function k(a,b){for(var c=0;c<b.length;c++)if(l(a,b[c]))return!0;return!1}function l(a,b){var c=2,d=1,e=a,f=b;return!m(e,f)&&e.top<=f.top&&e.right>=f.right&&e.bottom>=f.bottom&&e.left<=f.left&&f.height>=d&&f.width>=c}function m(a,b){return a===b||a.left===b.left&&a.right===b.right&&a.height===b.height&&a.width===b.width}var n,o,p,q,r="custom-selection-canvas",s={position:"absolute","pointer-events":"none","z-index":-1},t=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1;b.prototype.redraw=function(a){f(a.getBoundingClientRect()),d(a)},b.prototype.clearSelection=function(){f()},a.CustomSelection.Lib.SelectionDrawer=b}(this);
//# sourceMappingURL=jquery.custom-selection.min.map