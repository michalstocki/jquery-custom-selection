/*! jquery-custom-selection - v0.3.0 - 2014-10-27 */
!function(a){function b(a){Xb=a[0].ownerDocument,Wb=p(a[0])}function c(a){Gb=new Hammer.Manager(a[0],{recognizers:[[Hammer.Press],[Hammer.Tap]]}),Gb.set({holdThreshold:Fb.holdThreshold,holdTimeout:Fb.holdTimeout})}function d(b){c(b),a(Ob).add(Pb).on("touchstart",i),a(o(Ob)).on("touchmove",j).on("touchend",k),b.on("touchend",g),Gb.on("press",f),Gb.on("tap",v),a(Wb).on("orientationchange resize",l)}function e(b){a(o(Ob)).off("touchmove",j).off("touchend",k),b.off("touchend",g),Gb.destroy()}function f(a){a.srcEvent.preventDefault(),a.srcEvent.stopPropagation(),t(a)}function g(a){Vb&&(a.preventDefault(),Vb=!1)}function h(a){a.preventDefault(),Tb=F(a.originalEvent),Nb.requestFrame(function(){var a=K(Tb),b=ab(Tb,a);u(b)})}function i(a){a.preventDefault(),D(a.target),$b=q()}function j(a){Zb&&(h(a),Vb=!0)}function k(){Zb&&(E(),$b=null)}function l(){Yb&&w()}function m(){a(Zb).removeClass(Kb),Zb=Zb===Ob?Pb:Ob,a(Zb).addClass(Kb)}function n(){return Fb.scaleGetter()}function o(a){return a.ownerDocument.body}function p(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function q(){return Zb===Ob?jb(Yb):ib(Yb)}function r(b){var c=a(b);_b=c.css("user-select"),c.css("user-select","none")}function s(b){a(b).css("user-select",_b)}function t(a){var b=J(a);if(!C(b)){v();var c=G(a,{shift:!1}),d=X(b,c);u(d),Vb=!0}}function u(a){z(a)&&(Yb=a,w(),Fb.onSelectionChange(Yb)),N()}function v(){Yb=null,M(),Qb.clearSelection(),Fb.onSelectionChange(Xb.createRange())}function w(){Qb.redraw(Yb),A(Yb)}function x(a){return 0!==Yb.compareBoundaryPoints(Range.END_TO_END,a)}function y(a){return 0!==Yb.compareBoundaryPoints(Range.START_TO_START,a)}function z(a){return!Yb||x(a)||y(a)}function A(b){var c=b.getClientRects(),d=c[0],e=c[c.length-1];a(Ob).css({top:W(d.bottom),left:V(d.left)}),a(Pb).css({top:W(e.bottom),left:V(e.right)})}function B(b){Ob=a(Fb.startMarker)[0]||L(b,Ib),Pb=a(Fb.endMarker)[0]||L(b,Jb),ac=P(b),M()}function C(a){return a===Ob||a===Pb}function D(b){Zb=b,a(Zb).addClass(Kb)}function E(){a(Zb).removeClass(Kb),Zb=null}function F(a){var b=G(a);return b.translate(H()),b.scale(I()),b}function G(a,b){return new CustomSelection.Lib.Point(a,b)}function H(){var a=ac;return{x:-a.framesOffset.x,y:-a.framesOffset.y}}function I(){return 1/n()}function J(a){var b=a.touches||a.pointers||[a];return b[0].target}function K(a){M();var b=Xb.elementFromPoint(a.clientX,a.clientY);return N(),b}function L(a,b){var c=Xb.createElement("div");return c.setAttribute("class",Hb+" "+b),c.setAttribute("style","position: absolute;"),a.append(c),c}function M(){a(Ob).add(Pb).css({visibility:"hidden"})}function N(){a(Ob).add(Pb).css({visibility:"visible"})}function O(a,b){return a.offsetParent===b.offsetParent}function P(a){if(O(Ob,Pb))return Q(a);throw new Error("Both marker elements must have the same offset parent!")}function Q(a){var b=T(a[0]),c=T(Ob),d={x:b.left-c.left,y:b.top-c.top},e=S(Ob),f=R(a[0]);return{x:d.x+f.left-e.left,y:d.y+f.top-e.top,framesOffset:d}}function R(a){var b=S(a);return{left:b.left*n(),top:b.top*n()}}function S(a){var b=a.offsetParent;return b.getBoundingClientRect()}function T(a){var b=p(a);return U(b)}function U(a){var b={top:0,left:0},c=a.frameElement;if(c){var d=c.getBoundingClientRect(),e=a.document.body.getBoundingClientRect();b.left+=d.left+c.clientLeft-e.left,b.top+=d.top+c.clientTop-e.top,a!==top&&U(a.parent,b)}return b}function V(a){return a*n()+ac.x}function W(a){return a*n()+ac.y}function X(a,b){var c,d=null;return(c=kb(a,b))&&(d=fb(c,b),Y(d),Z(d)),d}function Y(a){for(;!$(a);){if(a.startOffset<1)return;a.setStart(a.startContainer,a.startOffset-1)}a.setStart(a.startContainer,a.startOffset+1)}function Z(a){for(var b=Math.max(a.endContainer.data.length,0);!_(a);){if(a.endOffset>=b)return;a.setEnd(a.endContainer,a.endOffset+1)}a.setEnd(a.endContainer,a.endOffset-1)}function $(a){return a.toString().charCodeAt(0)in Ub}function _(a){var b=a.toString();return b.charCodeAt(b.length-1)in Ub}function ab(a,b){var c=Yb.cloneRange(),d=db(b,a);if(d){var e=bb(d),f=cb();e.applyTo(c),c.collapsed&&(f.applyTo(c),e.applyOppositeTo(c),m())}return c}function bb(a){return Zb===Ob?gb(a):hb(a)}function cb(){return bb(q())}function db(a,b){var c,d=null;return(c=eb(a,b))?d=ib(c):(c=tb(a,b))&&(d=jb(c)),d}function eb(a,b){var c=kb(a,b),d=null;return c&&(d=fb(c,b)),d}function fb(a,b){for(var c=Xb.createRange(),d=0,e=a.data.length;e>d;){var f=d+e>>1;c.setStart(a,d),c.setEnd(a,f+1),lb(c,b)?e=f:(d=f+1,c.setStart(a,d),c.setEnd(a,e))}return c}function gb(a){return new CustomSelection.Lib.StartBoundary(a)}function hb(a){return new CustomSelection.Lib.EndBoundary(a)}function ib(a){return{container:a.startContainer,offset:a.startOffset}}function jb(a){return{container:a.endContainer,offset:a.endOffset}}function kb(a,b){if(a)for(var c,d=a.childNodes,e=0;c=d[e++];)if(rb(c)&&mb(c,b))return c;return null}function lb(a,b){for(var c,d=a.getClientRects(),e=0;c=d[e++];)if(ob(c,b))return!0;return!1}function mb(a,b){for(var c,d=nb(a),e=0;c=d[e++];)if(ob(c,b))return!0;return!1}function nb(a){var b=Xb.createRange();return b.selectNode(a),b.getClientRects()}function ob(a,b){return pb(a,b)&&qb(a,b)}function pb(a,b){var c=Mb?b.pageY:b.clientY;return c>a.top&&c<a.bottom}function qb(a,b){var c=Mb?b.pageX:b.clientX;return c>=a.left&&c<=a.right}function rb(a){return a.nodeType===Node.TEXT_NODE&&a.length>0}function sb(a){return a.childNodes.length>0}function tb(a,b){var c=null,d=xb({point:b,getBetterRect:yb,getBestRectFromNode:zb}),e=xb({point:b,getBetterRect:Db,getBestRectFromNode:Eb}),f=vb(a,d)||vb(a,e);return f&&(c=Cb(),ub(null,null)),c}function ub(a,b){Rb=a,Sb=b}function vb(a,b){for(var c,d=a;c=wb(d,b);){if(rb(c))return c;d=c}}function wb(a,b){var c=null;if(a)for(var d,e=a.childNodes,f=0;d=e[f++];){var g;(g=nb(d))&&g.length&&(sb(d)||rb(d))&&(c=b(c,d))}return c}function xb(a){var b=a.point,c=a.getBetterRect,d=a.getBestRectFromNode;return function(a,e){var f=a,g=d(e,b);if(a){var h=d(a,b);Ab(g,h)&&c(g,h)===g&&(f=e,ub(e,g))}else g&&(f=e,ub(e,g));return f}}function yb(a,b){return a.right>b.right?a:b.right>a.right?b:null}function zb(a,b){for(var c,d=nb(a),e=null,f=0;c=d[f++];)Bb(c,b)&&(!e||c.right>e.right)&&(e=c);return e}function Ab(a,b){return a&&b&&a!==b}function Bb(a,b){var c=b.clientX,d=b.clientY;return a.right<c&&a.top<=d&&a.bottom>=d}function Cb(){var a=nb(Rb),b=a[a.length-1];if(Sb===b){var c=document.createRange();return c.selectNode(Rb),c}var d={clientX:Sb.right-1,clientY:Sb.bottom-1};return fb(Rb,d)}function Db(a,b){return a.top>=b.top?a:b.top>=a.top?b:null}function Eb(a,b){for(var c,d=b.clientY,e=nb(a),f=null,g=0;c=e[g++];)c.top<d&&(!f||c.top>=f.top)&&(f=c);return f}var Fb,Gb,Hb="jcs-marker",Ib="jcs-beginning-marker",Jb="jcs-end-marker",Kb="jcs-marker-moving",Lb={holdThreshold:4,holdTimeout:500,onSelectionChange:function(){},scaleGetter:function(){return 1}},Mb=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,Nb=null,Ob=null,Pb=null,Qb=null;window.CustomSelection={Lib:{}},a.fn.customSelection=function(c){return Fb=a.extend(Lb,c),b(this),Nb=new CustomSelection.Lib.FrameRequester,Qb=new CustomSelection.Lib.SelectionDrawer({$element:this,contextWindow:Wb,contextDocument:Xb,fillStyle:Fb.selectionColor}),B(this),r(Xb.body),d(this),this},a.fn.clearCustomSelection=function(){return v(),this},a.fn.disableCustomSelection=function(){return v(),s(Xb.body),e(this),this};var Rb,Sb,Tb=null,Ub={32:" ",9:"	",13:"\r",10:"\n"},Vb=!1,Wb=null,Xb=null,Yb=null,Zb=null,$b=null,_b=null,ac={x:0,y:0}}(jQuery),function(a){"use strict";function b(a){this._container=a.container,this._offset=a.offset}function c(){b.apply(this,arguments)}function d(){b.apply(this,arguments)}c.prototype=Object.create(b.prototype),c.prototype.applyTo=function(a){a.setStart(this._container,this._offset)},c.prototype.applyOppositeTo=function(a){a.setEnd(this._container,this._offset)},a.CustomSelection.Lib.StartBoundary=c,d.prototype=Object.create(b.prototype),d.prototype.applyTo=function(a){a.setEnd(this._container,this._offset)},d.prototype.applyOppositeTo=function(a){a.setStart(this._container,this._offset)},a.CustomSelection.Lib.EndBoundary=d}(this),function(a){"use strict";function b(){this._ticking=!1}b.prototype.requestFrame=function(a){this._ticking||window.requestAnimationFrame(function(){a(),this._ticking=!1}.bind(this)),this._ticking=!0},a.CustomSelection.Lib.FrameRequester=b}(this),function(a){"use strict";function b(a,b){var e=$.extend({},c,b),f=a.touches||a.pointers,g=f[0];this.clientX=g.clientX,this.clientY=g.clientY,this.pageX=g.pageX,this.pageY=g.pageY,e.shift&&(this.clientY+=d,this.pageY+=d)}var c={shift:!0},d=-32;b.prototype.translate=function(a){this.clientX+=a.x,this.clientY+=a.y,this.pageX+=a.x,this.pageY+=a.y},b.prototype.scale=function(a){this.clientX*=a,this.clientY*=a,this.pageX*=a,this.pageY*=a},a.CustomSelection.Lib.Point=b}(this),function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),function(a){"use strict";function b(a){j=a,c()}function c(){g(),i=h.getContext("2d")}function d(a){var b=a.getBoundingClientRect(),c=a.getClientRects(),d=.5,e=d-b.left,f=d-b.top;i.save(),i.translate(e,f),i.beginPath(),Array.prototype.forEach.call(c,function(a){i.rect(a.left,a.top,a.width,a.height)}),i.closePath(),i.fillStyle=j.fillStyle,i.fill(),i.restore()}function e(){return m?0:$(j.contextWindow).scrollTop()}function f(a){a=a||{top:0,left:0,width:0,height:0},h.style.top=a.top+e()+"px",h.style.left=a.left+"px",h.width=a.width,h.height=a.height}function g(){h=j.contextDocument.createElement("canvas"),h.className=k,$(h).css(l),h.width=0,h.height=0,j.$element[0].appendChild(h)}var h,i,j,k="custom-selection-canvas",l={position:"absolute","pointer-events":"none","z-index":-1},m=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1;b.prototype.redraw=function(a){f(a.getBoundingClientRect()),d(a)},b.prototype.clearSelection=function(){f()},a.CustomSelection.Lib.SelectionDrawer=b}(this);
//# sourceMappingURL=jquery.custom-selection.min.map