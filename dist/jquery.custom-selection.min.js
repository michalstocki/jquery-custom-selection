/*! jquery-custom-selection - v0.1.2 - 2014-09-12 */
!function(a){function b(a){gb=a[0].ownerDocument,fb=gb.defaultView||gb.parentWindow}function c(a){a.each(function(){new Hammer(this,{holdThreshold:2,holdTimeout:500})}),a.on("touchmove",f).on("touchend",g).hammer().on("press",e).on("tap",j)}function d(a){a.off("touchmove",f).off("touchend",g).hammer().off("press",e).off("tap",j)}function e(a){if(a=a.gesture,a.srcEvent.preventDefault(),a.srcEvent.stopPropagation(),!i(a.target)){var b=r(a),c=q(a,{shift:!1});j(),w(b,c),m(),eb=!0}}function f(a){i(a.target)&&(h(a),eb=!0)}function g(a){eb&&(a.preventDefault(),eb=!1)}function h(a){a.preventDefault(),cb=q(a.originalEvent),$.requestFrame(function(){var b=s(cb);D(b,cb,a.target),p()})}function i(a){return a===_||a===ab}function j(){fb&&fb.getSelection().removeAllRanges(),a(_).detach(),a(ab).detach(),bb&&bb.clearSelection()}function k(){p(!0)}function l(a){return!hb||0!=hb.compareBoundaryPoints(Range.END_TO_END,a)||0!=hb.compareBoundaryPoints(Range.START_TO_START,a)}function m(a){if(a=a||!1,o(_,ab)){var b=gb.createRange();b.setStart.apply(b,n(_)),b.setEnd.apply(b,n(ab)),b.collapsed&&(b.setStart.apply(b,n(ab)),b.setEnd.apply(b,n(_))),fb.getSelection().addRange(b),(a||l(b))&&(hb=b,bb&&bb.redraw(b))}}function n(a){var b=H(a),c=a.parentNode;return a.nextSibling&&(b+=1),[c,b]}function o(){for(var a=0;a<arguments.length;a++){var b=arguments[a];if(!b.parentNode)return!1}return!0}function p(a){fb.getSelection().removeAllRanges(),m(a)}function q(a,b){return new CustomSelection.Lib.Point(a,b)}function r(a){var b=a.touches||a.pointers;return b[0].target}function s(a){u();var b=gb.elementFromPoint(a.clientX,a.clientY);return v(),b}function t(a){var b=gb.createElement("span");return b.setAttribute("class",a),b}function u(){var b={visibility:"hidden"};a(_).css(b),a(ab).css(b)}function v(){var b={visibility:"visible"};a(_).css(b),a(ab).css(b)}function w(a,b){var c;(c=I(a,b))&&(c=E(c,b),x(c,_),y(c,ab),c.parentNode.normalize())}function x(a,b){for(var c=a;!C(c,db);)if(c.data.length>1)c=z(c);else{if(!c.previousSibling||!M(c.previousSibling))return void F(c,b);c=c.previousSibling}G(c,b)}function y(a,b){for(var c=a;!B(c,db);)if(c.length>1)c=A(c);else{if(!c.nextSibling||!M(c.nextSibling))return void G(c,b);c=c.nextSibling}F(c,b)}function z(a){var b=a.splitText(a.length-1);return b.previousSibling}function A(a){return a.splitText(1)}function B(a,b){return a.data[0]===b}function C(a,b){return a.data[a.length-1]===b}function D(a,b,c){var d;if(d=I(a,b))d=E(d,b),F(d,c);else{if(!(d=O(a,b)))return null;G(d,c)}c.parentNode.normalize()}function E(a,b){for(;a.length>1;){var c=a.length>>1,d=a.splitText(c);J(d,b)&&(a=d)}return a}function F(a,b){a.parentNode.insertBefore(b,a)}function G(a,b){a.nextSibling?a.parentNode.insertBefore(b,a.nextSibling):a.parentNode.appendChild(b)}function H(a){var b=a.parentElement.childNodes;return Array.prototype.indexOf.call(b,a)}function I(a,b){if(a)for(var c,d=a.childNodes,e=0;c=d[e++];)if(M(c)&&J(c,b))return c;return null}function J(a,b){for(var c,d=K(a),e=0;c=d[e++];)if(L(c,b))return!0;return!1}function K(a){var b=gb.createRange();return b.selectNode(a),b.getClientRects()}function L(a,b){var c=b.clientX,d=b.clientY;return c>a.left&&c<a.right&&d>a.top&&d<a.bottom}function M(a){return a.nodeType===Node.TEXT_NODE&&a.length}function N(a){return a.childNodes.length>0}function O(a,b){var c=R.bind(null,b),d=W.bind(null,b);return P(a,c)||P(a,d)}function P(a,b){for(var c,d=a;c=Q(d,b);){if(M(c))return c;d=c}}function Q(a,b){var c=null;if(a)for(var d,e=a.childNodes,f=0;d=e[f++];){var g;(g=K(d))&&g.length&&(N(d)||M(d))&&(c=b(c,d))}return c}function R(a,b,c){var d=b,e=S(c,a);if(b){var f=S(b,a);T(e,f)&&e.right>f.right&&(d=V(c,e))}else e&&(d=V(c,e));return d}function S(a,b){for(var c,d=K(a),e=null,f=0;c=d[f++];)U(c,b)&&(!e||c.right>e.right)&&(e=c);return e}function T(a,b){return a&&b&&a!==b}function U(a,b){var c=b.clientX,d=b.clientY;return a.right<c&&a.top<=d&&a.bottom>=d}function V(a,b){var c=K(a),d=c[c.length-1];if(b!==d&&M(a)){var e={clientX:b.right-1,clientY:b.bottom-1};return E(a,e)}return a}function W(a,b,c){var d=X(c,a),e=b;if(b){var f=X(b,a);T(d,f)&&d.top>=f.top&&(e=V(c,d))}else d&&(e=V(c,d));return e}function X(a,b){for(var c,d=b.clientY,e=K(a),f=null,g=0;c=e[g++];)c.top<d&&(!f||c.top>=f.top)&&(f=c);return f}var Y,Z={markerClass:"marker"},$=null,_=null,ab=null,bb=null;window.CustomSelection={Lib:{}},a.fn.customSelection=function(d){return Y=a.extend(Z,d),c(this),b(this),_=t(Y.markerClass),ab=t(Y.markerClass),$=new CustomSelection.Lib.FrameRequester,bb=new CustomSelection.Lib.SelectionDrawer(this,Y.selectionColor),a(window).resize(k),this},a.fn.disableCustomSelection=function(){return d(this),j(),this};var cb=null,db=" ",eb=!1,fb=null,gb=null,hb=null}(jQuery),function(a){"use strict";function b(){this._ticking=!1}b.prototype.requestFrame=function(a){this._ticking||window.requestAnimationFrame(function(){a(),this._ticking=!1}.bind(this)),this._ticking=!0},a.CustomSelection.Lib.FrameRequester=b}(this),function(a){"use strict";function b(a,b){var e=$.extend({},c,b),f=a.touches||a.pointers,g=f[0];this.clientX=g.clientX,this.clientY=g.clientY,this.pageX=g.pageX,this.pageY=g.pageY,e.shift&&(this.clientY+=d,this.pageY+=d)}var c={shift:!0},d=-32;a.CustomSelection.Lib.Point=b}(this),function(a){"use strict";function b(a,b){k=a,l=b,c()}function c(){var a=g()||h();i=a.getContext("2d")}function d(a){var b=a.getClientRects();i.beginPath();for(var c=0;c<b.length;c++)i.rect(b[c].left+.5,b[c].top+.5,b[c].width,b[c].height);i.closePath(),i.fillStyle=l,i.fill(),j=a}function e(){var a=g();a&&i.clearRect(0,0,a.width,a.height)}function f(){var a=g();a.style.top=$(window).scrollTop()+"px",a.style.left=$(window).scrollLeft()+"px",a.width!=$(window).width()&&(a.width=$(window).width()),a.height!=$(window).height()&&(a.height=$(window).height())}function g(){return document.getElementById("customSelectionCanvas")}function h(){var a=document.createElement("canvas");return a.setAttribute("id","customSelectionCanvas"),k[0].appendChild(a),a}var i,j,k,l;b.prototype.redraw=function(a){e(),f(),d(a)},b.prototype.clearSelection=function(){e()},a.CustomSelection.Lib.SelectionDrawer=b}(this),function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();
//# sourceMappingURL=jquery.custom-selection.min.map