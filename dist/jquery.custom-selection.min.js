/*! jquery-custom-selection - v0.2.0 - 2014-09-29 */
!function(a){function b(a){kb=a[0].ownerDocument,jb=kb.defaultView||kb.parentWindow}function c(b){b.each(function(){new Hammer(this,{holdThreshold:2,holdTimeout:500})}),b.on("touchmove",f).on("touchend",g).hammer().on("press",e).on("tap",i),a(jb).on("orientationchange resize",j)}function d(a){a.off("touchmove",f).off("touchend",g).hammer().off("press",e).off("tap",i)}function e(a){if(a=a.gesture,a.srcEvent.preventDefault(),a.srcEvent.stopPropagation(),!k(a.target)){var b=u(a),c=t(a,{shift:!1});i(),z(b,c),l(),ib=!0}}function f(a){k(a.target)&&(h(a),ib=!0)}function g(a){ib&&(a.preventDefault(),ib=!1)}function h(a){a.preventDefault(),gb=t(a.originalEvent),cb.requestFrame(function(){var b=v(gb);G(b,gb,a.target),l()})}function i(){a(db).detach(),a(eb).detach(),lb=null,fb.clearSelection(),_.onSelectionChange(kb.createRange())}function j(){var a=q();m(a)}function k(a){return a===db||a===eb}function l(){var a=q();p(a)&&m(a)}function m(a){a&&(_.onSelectionChange(a),lb=a,fb.redraw(a))}function n(a){return 0!==lb.compareBoundaryPoints(Range.END_TO_END,a)}function o(a){return 0!==lb.compareBoundaryPoints(Range.START_TO_START,a)}function p(a){return!lb||n(a)||o(a)}function q(){if(s(db,eb)){var a=kb.createRange();return a.setStart.apply(a,r(db)),a.setEnd.apply(a,r(eb)),a.collapsed&&(a.setStart.apply(a,r(eb)),a.setEnd.apply(a,r(db))),a}return null}function r(a){var b=K(a),c=a.parentNode;return a.nextSibling&&(b+=1),[c,b]}function s(){for(var a=0;a<arguments.length;a++){var b=arguments[a];if(!b.parentNode)return!1}return!0}function t(a,b){return new CustomSelection.Lib.Point(a,b)}function u(a){var b=a.touches||a.pointers;return b[0].target}function v(a){x();var b=kb.elementFromPoint(a.clientX,a.clientY);return y(),b}function w(a){var b=kb.createElement("span");return b.setAttribute("class",a),b}function x(){var b={visibility:"hidden"};a(db).css(b),a(eb).css(b)}function y(){var b={visibility:"visible"};a(db).css(b),a(eb).css(b)}function z(a,b){var c;(c=L(a,b))&&(c=H(c,b),A(c,db),B(c,eb),c.parentNode.normalize())}function A(a,b){for(var c=a;!F(c,hb);)if(c.data.length>1)c=C(c);else{if(!c.previousSibling||!P(c.previousSibling))return void I(c,b);c=c.previousSibling}J(c,b)}function B(a,b){for(var c=a;!E(c,hb);)if(c.length>1)c=D(c);else{if(!c.nextSibling||!P(c.nextSibling))return void J(c,b);c=c.nextSibling}I(c,b)}function C(a){var b=a.splitText(a.length-1);return b.previousSibling}function D(a){return a.splitText(1)}function E(a,b){return a.data[0]===b}function F(a,b){return a.data[a.length-1]===b}function G(a,b,c){var d;if(d=L(a,b))d=H(d,b),I(d,c);else{if(!(d=R(a,b)))return null;J(d,c)}c.parentNode.normalize()}function H(a,b){for(;a.length>1;){var c=a.length>>1,d=a.splitText(c);M(d,b)&&(a=d)}return a}function I(a,b){a.parentNode.insertBefore(b,a)}function J(a,b){a.nextSibling?a.parentNode.insertBefore(b,a.nextSibling):a.parentNode.appendChild(b)}function K(a){var b=a.parentElement.childNodes;return Array.prototype.indexOf.call(b,a)}function L(a,b){if(a)for(var c,d=a.childNodes,e=0;c=d[e++];)if(P(c)&&M(c,b))return c;return null}function M(a,b){for(var c,d=N(a),e=0;c=d[e++];)if(O(c,b))return!0;return!1}function N(a){var b=kb.createRange();return b.selectNode(a),b.getClientRects()}function O(a,b){var c=bb?b.pageX:b.clientX,d=bb?b.pageY:b.clientY;return c>a.left&&c<a.right&&d>a.top&&d<a.bottom}function P(a){return a.nodeType===Node.TEXT_NODE&&a.length}function Q(a){return a.childNodes.length>0}function R(a,b){var c=U.bind(null,b),d=Z.bind(null,b);return S(a,c)||S(a,d)}function S(a,b){for(var c,d=a;c=T(d,b);){if(P(c))return c;d=c}}function T(a,b){var c=null;if(a)for(var d,e=a.childNodes,f=0;d=e[f++];){var g;(g=N(d))&&g.length&&(Q(d)||P(d))&&(c=b(c,d))}return c}function U(a,b,c){var d=b,e=V(c,a);if(b){var f=V(b,a);W(e,f)&&e.right>f.right&&(d=Y(c,e))}else e&&(d=Y(c,e));return d}function V(a,b){for(var c,d=N(a),e=null,f=0;c=d[f++];)X(c,b)&&(!e||c.right>e.right)&&(e=c);return e}function W(a,b){return a&&b&&a!==b}function X(a,b){var c=b.clientX,d=b.clientY;return a.right<c&&a.top<=d&&a.bottom>=d}function Y(a,b){var c=N(a),d=c[c.length-1];if(b!==d&&P(a)){var e={clientX:b.right-1,clientY:b.bottom-1};return H(a,e)}return a}function Z(a,b,c){var d=$(c,a),e=b;if(b){var f=$(b,a);W(d,f)&&d.top>=f.top&&(e=Y(c,d))}else d&&(e=Y(c,d));return e}function $(a,b){for(var c,d=b.clientY,e=N(a),f=null,g=0;c=e[g++];)c.top<d&&(!f||c.top>=f.top)&&(f=c);return f}var _,ab={markerClass:"marker",onSelectionChange:function(){}},bb=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,cb=null,db=null,eb=null,fb=null;window.CustomSelection={Lib:{}},a.fn.customSelection=function(d){return _=a.extend(ab,d),b(this),c(this),db=w(_.markerClass),eb=w(_.markerClass),cb=new CustomSelection.Lib.FrameRequester,fb=new CustomSelection.Lib.SelectionDrawer({$element:this,contextWindow:jb,contextDocument:kb,fillStyle:_.selectionColor}),this},a.fn.clearCustomSelection=function(){return i(),this},a.fn.disableCustomSelection=function(){return d(this),i(),this};var gb=null,hb=" ",ib=!1,jb=null,kb=null,lb=null}(jQuery),function(a){"use strict";function b(){this._ticking=!1}b.prototype.requestFrame=function(a){this._ticking||window.requestAnimationFrame(function(){a(),this._ticking=!1}.bind(this)),this._ticking=!0},a.CustomSelection.Lib.FrameRequester=b}(this),function(a){"use strict";function b(a,b){var e=$.extend({},c,b),f=a.touches||a.pointers,g=f[0];this.clientX=g.clientX,this.clientY=g.clientY,this.pageX=g.pageX,this.pageY=g.pageY,e.shift&&(this.clientY+=d,this.pageY+=d)}var c={shift:!0},d=-32;a.CustomSelection.Lib.Point=b}(this),function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),function(a){"use strict";function b(a){j=a,c()}function c(){g(),i=h.getContext("2d")}function d(a){var b=a.getBoundingClientRect(),c=a.getClientRects(),d=.5,e=d-b.left,f=d-b.top;i.save(),i.translate(e,f),i.beginPath(),Array.prototype.forEach.call(c,function(a){i.rect(a.left,a.top,a.width,a.height)}),i.closePath(),i.fillStyle=j.fillStyle,i.fill(),i.restore()}function e(){return l?0:$(j.contextWindow).scrollTop()}function f(a){a=a||{top:0,left:0,width:0,height:0},h.style.top=a.top+e()+"px",h.style.left=a.left+"px",h.width=a.width,h.height=a.height}function g(){h=j.contextDocument.createElement("canvas"),h.className=k,h.width=0,h.height=0,j.$element[0].appendChild(h)}var h,i,j,k="custom-selection-canvas",l=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1;b.prototype.redraw=function(a){f(a.getBoundingClientRect()),d(a)},b.prototype.clearSelection=function(){f()},a.CustomSelection.Lib.SelectionDrawer=b}(this);
//# sourceMappingURL=jquery.custom-selection.min.map