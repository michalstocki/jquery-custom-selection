/*! jquery-custom-selection - v0.4.1 - 2014-10-28 */
!function(a){function b(a){Qb=a[0].ownerDocument,Pb=n(a[0])}function c(a){zb=new Hammer.Manager(a[0],{recognizers:[[Hammer.Press],[Hammer.Tap]]}),zb.set({holdThreshold:yb.holdThreshold,holdTimeout:yb.holdTimeout})}function d(b){c(b),a(Hb).add(Ib).on("touchstart",i),a(m(Hb)).on("touchmove",j).on("touchend",k),b.on("touchend",g),zb.on("press",f),zb.on("tap",t)}function e(b){a(m(Hb)).off("touchmove",j).off("touchend",k),b.off("touchend",g),zb.destroy()}function f(a){a.srcEvent.preventDefault(),a.srcEvent.stopPropagation(),r(a)}function g(a){Ob&&(a.preventDefault(),Ob=!1)}function h(a){a.preventDefault(),Mb=F(a.originalEvent),Gb.requestFrame(function(){var a=K(Mb),b=V(Mb,a);s(b)})}function i(a){a.preventDefault(),D(a.target),Tb=o()}function j(a){Sb&&(h(a),Ob=!0)}function k(){Sb&&(E(),Tb=null)}function l(){a(Sb).removeClass(Db),Sb=Sb===Hb?Ib:Hb,a(Sb).addClass(Db)}function m(a){return a.ownerDocument.body}function n(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function o(){return Sb===Hb?cb(Rb):bb(Rb)}function p(b){var c=a(b);Ub=c.css("user-select"),c.css("user-select","none")}function q(b){a(b).css("user-select",Ub)}function r(a){var b=J(a);if(!C(b)){t();var c=G(a,{shift:!1}),d=Q(b,c);s(d),Ob=!0}}function s(a){a&&(y(a)&&(Rb=a,v(),yb.onSelectionChange(Rb)),N())}function t(){A(Rb)&&(M(),Jb.clearSelection(),yb.onSelectionChange(Qb.createRange())),Rb=null}function u(){A(Rb)&&v()}function v(){Jb.redraw(Rb),z(Rb)}function w(a){return 0!==Rb.compareBoundaryPoints(Range.END_TO_END,a)}function x(a){return 0!==Rb.compareBoundaryPoints(Range.START_TO_START,a)}function y(a){return!Rb||w(a)||x(a)}function z(b){var c=b.getClientRects(),d=c[0],e=c[c.length-1];a(Hb).css({top:P(d.bottom),left:O(d.left)}),a(Ib).css({top:P(e.bottom),left:O(e.right)})}function A(a){return!!a&&a.getClientRects().length>0}function B(b){Hb=a(yb.startMarker)[0]||L(b,Bb),Ib=a(yb.endMarker)[0]||L(b,Cb),M()}function C(a){return a===Hb||a===Ib}function D(b){Sb=b,a(Sb).addClass(Db)}function E(){a(Sb).removeClass(Db),Sb=null}function F(a){var b=G(a);return b.translate(H()),b.scale(I()),b}function G(a,b){return new CustomSelection.Lib.Point(a,b)}function H(){var a=yb.contextOrigin;return{x:-a.offsetX,y:-a.offsetY}}function I(){return 1/yb.contextOrigin.scale}function J(a){var b=a.touches||a.pointers||[a];return b[0].target}function K(a){M();var b=Qb.elementFromPoint(a.clientX,a.clientY);return N(),b}function L(a,b){var c=Qb.createElement("div");return c.setAttribute("class",Ab+" "+b),c.setAttribute("style","position: absolute;"),a.append(c),c}function M(){a(Hb).add(Ib).css({visibility:"hidden"})}function N(){a(Hb).add(Ib).css({visibility:"visible"})}function O(a){return a*yb.contextOrigin.scale+yb.contextOrigin.offsetX}function P(a){return a*yb.contextOrigin.scale+yb.contextOrigin.offsetY}function Q(a,b){var c,d=null;return(c=db(a,b))&&(d=$(c,b),R(d),S(d)),d}function R(a){for(;!T(a);){if(a.startOffset<1)return;a.setStart(a.startContainer,a.startOffset-1)}a.setStart(a.startContainer,a.startOffset+1)}function S(a){for(var b=Math.max(a.endContainer.data.length,0);!U(a);){if(a.endOffset>=b)return;a.setEnd(a.endContainer,a.endOffset+1)}a.setEnd(a.endContainer,a.endOffset-1)}function T(a){return a.toString().charCodeAt(0)in Nb}function U(a){var b=a.toString();return b.charCodeAt(b.length-1)in Nb}function V(a,b){var c=Rb.cloneRange(),d=Y(b,a);if(d){var e=W(d),f=X();e.applyTo(c),c.collapsed&&(f.applyTo(c),e.applyOppositeTo(c),l())}return c}function W(a){return Sb===Hb?_(a):ab(a)}function X(){return W(o())}function Y(a,b){var c,d=null;return(c=Z(a,b))?d=bb(c):(c=mb(a,b))&&(d=cb(c)),d}function Z(a,b){var c=db(a,b),d=null;return c&&(d=$(c,b)),d}function $(a,b){for(var c=Qb.createRange(),d=0,e=a.data.length;e>d;){var f=d+e>>1;c.setStart(a,d),c.setEnd(a,f+1),eb(c,b)?e=f:(d=f+1,c.setStart(a,d),c.setEnd(a,e))}return c}function _(a){return new CustomSelection.Lib.StartBoundary(a)}function ab(a){return new CustomSelection.Lib.EndBoundary(a)}function bb(a){return{container:a.startContainer,offset:a.startOffset}}function cb(a){return{container:a.endContainer,offset:a.endOffset}}function db(a,b){if(a)for(var c,d=a.childNodes,e=0;c=d[e++];)if(kb(c)&&fb(c,b))return c;return null}function eb(a,b){for(var c,d=a.getClientRects(),e=0;c=d[e++];)if(hb(c,b))return!0;return!1}function fb(a,b){for(var c,d=gb(a),e=0;c=d[e++];)if(hb(c,b))return!0;return!1}function gb(a){var b=Qb.createRange();return b.selectNode(a),b.getClientRects()}function hb(a,b){return ib(a,b)&&jb(a,b)}function ib(a,b){var c=Fb?b.pageY:b.clientY;return c>a.top&&c<a.bottom}function jb(a,b){var c=Fb?b.pageX:b.clientX;return c>=a.left&&c<=a.right}function kb(a){return a.nodeType===Node.TEXT_NODE&&a.length>0}function lb(a){return a.childNodes.length>0}function mb(a,b){var c=null,d=qb({point:b,getBetterRect:rb,getBestRectFromNode:sb}),e=qb({point:b,getBetterRect:wb,getBestRectFromNode:xb}),f=ob(a,d)||ob(a,e);return f&&(c=vb(),nb(null,null)),c}function nb(a,b){Kb=a,Lb=b}function ob(a,b){for(var c,d=a;c=pb(d,b);){if(kb(c))return c;d=c}}function pb(a,b){var c=null;if(a)for(var d,e=a.childNodes,f=0;d=e[f++];){var g;(g=gb(d))&&g.length&&(lb(d)||kb(d))&&(c=b(c,d))}return c}function qb(a){var b=a.point,c=a.getBetterRect,d=a.getBestRectFromNode;return function(a,e){var f=a,g=d(e,b);if(a){var h=d(a,b);tb(g,h)&&c(g,h)===g&&(f=e,nb(e,g))}else g&&(f=e,nb(e,g));return f}}function rb(a,b){return a.right>b.right?a:b.right>a.right?b:null}function sb(a,b){for(var c,d=gb(a),e=null,f=0;c=d[f++];)ub(c,b)&&(!e||c.right>e.right)&&(e=c);return e}function tb(a,b){return a&&b&&a!==b}function ub(a,b){var c=b.clientX,d=b.clientY;return a.right<c&&a.top<=d&&a.bottom>=d}function vb(){var a=gb(Kb),b=a[a.length-1];if(Lb===b){var c=document.createRange();return c.selectNode(Kb),c}var d={clientX:Lb.right-1,clientY:Lb.bottom-1};return $(Kb,d)}function wb(a,b){return a.top>=b.top?a:b.top>=a.top?b:null}function xb(a,b){for(var c,d=b.clientY,e=gb(a),f=null,g=0;c=e[g++];)c.top<d&&(!f||c.top>=f.top)&&(f=c);return f}var yb,zb,Ab="jcs-marker",Bb="jcs-beginning-marker",Cb="jcs-end-marker",Db="jcs-marker-moving",Eb={holdThreshold:4,holdTimeout:500,onSelectionChange:function(){},contextOrigin:{offsetX:0,offsetY:0,scale:1}},Fb=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,Gb=null,Hb=null,Ib=null,Jb=null;window.CustomSelection={Lib:{}},a.fn.customSelection=function(c){return yb=a.extend(Eb,c),b(this),Gb=new CustomSelection.Lib.FrameRequester,Jb=new CustomSelection.Lib.SelectionDrawer({$element:this,contextWindow:Pb,contextDocument:Qb,fillStyle:yb.selectionColor}),B(this),p(Qb.body),d(this),this},a.fn.refreshCustomSelection=function(a){return a&&(yb.contextOrigin=a),u(),this},a.fn.clearCustomSelection=function(){return t(),this},a.fn.disableCustomSelection=function(){return t(),q(Qb.body),e(this),this};var Kb,Lb,Mb=null,Nb={32:" ",9:"	",13:"\r",10:"\n"},Ob=!1,Pb=null,Qb=null,Rb=null,Sb=null,Tb=null,Ub=null}(jQuery),function(a){"use strict";function b(a){this._container=a.container,this._offset=a.offset}function c(){b.apply(this,arguments)}function d(){b.apply(this,arguments)}c.prototype=Object.create(b.prototype),c.prototype.applyTo=function(a){a.setStart(this._container,this._offset)},c.prototype.applyOppositeTo=function(a){a.setEnd(this._container,this._offset)},a.CustomSelection.Lib.StartBoundary=c,d.prototype=Object.create(b.prototype),d.prototype.applyTo=function(a){a.setEnd(this._container,this._offset)},d.prototype.applyOppositeTo=function(a){a.setStart(this._container,this._offset)},a.CustomSelection.Lib.EndBoundary=d}(this),function(a){"use strict";function b(){this._ticking=!1}b.prototype.requestFrame=function(a){this._ticking||window.requestAnimationFrame(function(){a(),this._ticking=!1}.bind(this)),this._ticking=!0},a.CustomSelection.Lib.FrameRequester=b}(this),function(a){"use strict";function b(a,b){var e=$.extend({},c,b),f=a.touches||a.pointers,g=f[0];this.clientX=g.clientX,this.clientY=g.clientY,this.pageX=g.pageX,this.pageY=g.pageY,e.shift&&(this.clientY+=d,this.pageY+=d)}var c={shift:!0},d=-32;b.prototype.translate=function(a){this.clientX+=a.x,this.clientY+=a.y,this.pageX+=a.x,this.pageY+=a.y},b.prototype.scale=function(a){this.clientX*=a,this.clientY*=a,this.pageX*=a,this.pageY*=a},a.CustomSelection.Lib.Point=b}(this),function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),function(a){"use strict";function b(a){j=a,c()}function c(){g(),i=h.getContext("2d")}function d(a){var b=a.getBoundingClientRect(),c=a.getClientRects(),d=.5,e=d-b.left,f=d-b.top;i.save(),i.translate(e,f),i.beginPath(),Array.prototype.forEach.call(c,function(a){i.rect(a.left,a.top,a.width,a.height)}),i.closePath(),i.fillStyle=j.fillStyle,i.fill(),i.restore()}function e(){return m?0:$(j.contextWindow).scrollTop()}function f(a){a=a||{top:0,left:0,width:0,height:0},h.style.top=a.top+e()+"px",h.style.left=a.left+"px",h.width=a.width,h.height=a.height}function g(){h=j.contextDocument.createElement("canvas"),h.className=k,$(h).css(l),h.width=0,h.height=0,j.$element[0].appendChild(h)}var h,i,j,k="custom-selection-canvas",l={position:"absolute","pointer-events":"none","z-index":-1},m=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1;b.prototype.redraw=function(a){f(a.getBoundingClientRect()),d(a)},b.prototype.clearSelection=function(){f()},a.CustomSelection.Lib.SelectionDrawer=b}(this);
//# sourceMappingURL=jquery.custom-selection.min.map