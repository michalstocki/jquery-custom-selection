{"version":3,"file":"jquery.custom-selection.min.js","sources":["jquery.custom-selection.js"],"names":["$","hammerAllowTextSelection","Hammer","defaults","cssProps","userSelect","enableTouchSelectionFor","$element","each","this","holdThreshold","holdTimeout","on","handleGlobalTouchMove","handleGlobalTouchEnd","hammer","handleGlobalTapHold","clearSelection","disableTouchSelectionFor","off","e","gesture","srcEvent","preventDefault","stopPropagation","isMarker","target","element","getTouchedElementFromEvent","point","getTouchPoint","shift","wrapWithMarkersWordAtPoint","createSelection","rejectTouchEnd","jqueryEvent","handleMarkerTouchMove","lastPoint","originalEvent","frameRequester","requestFrame","eventAnchor","getTouchedElementByPoint","mark","updateSelection","startMarker","endMarker","window","getSelection","removeAllRanges","detach","existInDOM","range","document","createRange","setStart","apply","getRangeBoundAt","setEnd","collapsed","addRange","offset","Math","max","getIndexOfElement","anchor","parentNode","i","arguments","length","touchEvent","options","CustomSelection","Lib","Point","touches","pointers","touchPoint","elementFromPoint","clientX","clientY","createMarker","kind","span","createElement","setAttribute","textNode","getFromElNodeContainingPoint","trimTextNodeWhileContainsPoint","putMarkerBeforeWhitespaceOnLeftOf","putMarkerBeforeWhitespaceOnRightOf","normalize","marker","node","nodeEndsWith","WHITESPACE","data","removeLastLetter","previousSibling","nodeIsText","putMarkerBefore","putMarkerAfter","nodeStartsWith","removeFirstLetter","nextSibling","subNode","splitText","letter","el","getClosestTextNodeFromEl","trimPosition","nodeContainsPoint","insertBefore","appendChild","elements","parentElement","childNodes","Array","prototype","indexOf","call","n","nodes","rect","rects","getRectsForNode","j","rectContainsPoint","selectNode","getClientRects","x","y","left","right","top","bottom","nodeType","Node","TEXT_NODE","getClosestNodeFromEl","closestNode","getNodeCloserToPoint","winner","rival","nearestWinnerRect","getRectNearestToPoint","nearestRivalRect","nearestRect","settings","markerClass","fn","customSelection","extend","FrameRequester","disableCustomSelection","jQuery","global","_ticking","func","requestAnimationFrame","bind","touch","pageX","pageY","SHIFT_Y","lastTime","vendors","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","id","setTimeout","clearTimeout"],"mappings":"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"}