{"version":3,"file":"jquery.custom-selection.min.js","sources":["jquery.custom-selection.js"],"names":["$","useContextOf","$element","contextDocument","ownerDocument","contextWindow","getWindowOf","initializeHammerFor","hammer","Hammer","Manager","recognizers","Press","Tap","set","holdThreshold","settings","holdTimeout","enableTouchSelectionFor","startMarker","add","endMarker","on","handleMarkerTouchStart","getBodyOf","handleMarkerTouchMove","handleMarkerTouchMoveEnd","handleGlobalTouchEnd","handleGlobalTapHold","clearSelection","handleResize","disableTouchSelectionFor","off","destroy","e","srcEvent","preventDefault","stopPropagation","selectWordUnderPointer","jqueryEvent","rejectTouchEnd","handleMarkerPointerMove","lastPoint","createPointFromMarkerEvent","originalEvent","frameRequester","requestFrame","eventTarget","getTouchedElementByPoint","range","getRangeCoveringLastSelectionAndPointInElement","makeSelectionFor","setMovedMarker","target","selectionAnchor","getSelectionAnchor","movedMarker","unsetMovedMarker","lastSelectionRange","drawSelectionRange","toggleMovedMarker","removeClass","MARKER_MOVING_CLASS","addClass","getContextScale","scaleGetter","element","body","doc","defaultView","parentWindow","getEndAnchorOf","getStartAnchorOf","disableNativeSelectionFor","userSelectBeforeEnablingSelection","css","restoreNativeSelectionFor","pointerEvent","getTargetElementFromPointerEvent","isMarker","point","createPointFromEvent","shift","getRangeWrappingWordAtPoint","rangeDiffersFromLastSelection","onSelectionChange","showMarkers","hideMarkers","selectionDrawer","createRange","redraw","adjustMarkerPositionsTo","hasEndOtherThanLastSelectionEnd","compareBoundaryPoints","Range","END_TO_END","hasStartOtherThanLastSelectionStart","START_TO_START","rects","getClientRects","firstRect","lastRect","length","style","top","yToMarkersContext","bottom","left","xToMarkersContext","right","initMarkers","createMarkerInside","MARKER_START_CLASS","MARKER_END_CLASS","markersOriginOffset","getMarkersOriginOffset","translate","apply","getVectorOfMarkersOrigin","scale","getScaleOfMarkersContext","options","CustomSelection","Lib","Point","offset","framesOffsetX","framesOffsetY","touches","pointers","touchPoint","elementFromPoint","clientX","clientY","$parent","className","createElement","setAttribute","MARKER_CLASS","append","visibility","hasTheSameOffsetParent","elementA","elementB","offsetParent","computeMarkerOffsetRelativeTo","Error","elementAbsoluteOffset","getElementAbsoluteOffset","markerAbsoluteOffset","getMarkersAbsoluteOffset","x","elementX","y","elementY","frameX","frameY","win","elementWindowOffset","computeFrameOffset","elementOffset","getBoundingClientRect","marker","dims","frame","frameElement","frameRect","frameBodyRect","document","clientLeft","clientTop","parent","textNode","getFromElNodeContainingPoint","getFromTextNodeMinimalRangeContainingPoint","expandRangeToStartAfterTheWhitespaceOnLeft","expandRangeToEndBeforeTheWhitespaceOnRight","rangeStartsWithWhitespace","startOffset","setStart","startContainer","maxIndex","Math","max","endContainer","data","rangeEndsWithWhitespace","endOffset","setEnd","toString","charCodeAt","WHITESPACE_LIST","stringified","coveringRange","cloneRange","pointAnchor","convertPointInElementToAnchor","bound","getNewSelectionBoundary","protectedBound","getProtectedSelectionBoundary","applyTo","collapsed","applyOppositeTo","anchor","createStartBoundary","createEndBoundary","pointRange","getClosestPointRangeFormElement","startIndex","endIndex","middle","rangeContainsPoint","StartBoundary","EndBoundary","container","el","n","nodes","childNodes","i","nodeIsText","nodeContainsPoint","rect","j","rectContainsPoint","node","getRectsForNode","selectNode","rectContainsPointVertically","rectOrItsBoundsContainPointHorizontally","isAppleDevice","pageY","pageX","nodeType","Node","TEXT_NODE","nodeHasChildren","nearestOnTheLeftOfPoint","createNodeComparator","getBetterRect","getRectMoreOnTheRight","getBestRectFromNode","getRectNearestOnLeftOfPoint","nearestAbovePoint","getLowerRect","getRectNearestAbovePoint","closestNodeFound","searchTextNode","createRangeAtTheEndOfTheClosestNode","setClosestNodeAndRect","closestNode","closestRectInNode","comparator","subNode","searchNode","winner","rival","newWinner","nearestRivalRect","nearestWinnerRect","areDifferent","rectA","rectB","nearestRect","rectIsInTheSameLineOnLeft","arg1","arg2","defaults","navigator","userAgent","match","window","fn","customSelection","extend","this","FrameRequester","SelectionDrawer","fillStyle","selectionColor","clearCustomSelection","disableCustomSelection",32,9,13,10,"jQuery","global","Boundary","_container","_offset","arguments","prototype","Object","create","_ticking","func","requestAnimationFrame","bind","touch","SHIFT_Y","lastTime","vendors","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","id","setTimeout","clearTimeout","initCanvas","createCanvas","context","canvas","getContext","drawSelection","boundingClientRect","SUBPIXEL_OFFSET","offsetX","offsetY","save","beginPath","Array","forEach","call","width","height","closePath","fill","restore","yOffset","scrollTop","updateCanvasBounds","newBounds","CUSTOM_SELECTION_CANVAS_CLASS","CUSTOM_SELECTION_CANVAS_STYLE","appendChild","position","pointer-events","z-index"],"mappings":"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"}