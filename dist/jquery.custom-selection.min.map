{"version":3,"file":"jquery.custom-selection.min.js","sources":["jquery.custom-selection.js"],"names":["$","useContextOf","$element","contextDocument","ownerDocument","contextWindow","getWindowOf","initializeHammerFor","hammer","Hammer","Manager","recognizers","Press","Tap","set","holdThreshold","settings","holdTimeout","enableTouchSelectionFor","startMarker","add","endMarker","on","handleMarkerTouchStart","getBodyOf","handleMarkerTouchMove","handleMarkerTouchMoveEnd","handleGlobalTouchEnd","handleGlobalTapHold","clearSelection","disableTouchSelectionFor","off","destroy","e","srcEvent","preventDefault","stopPropagation","selectWordUnderPointer","jqueryEvent","rejectTouchEnd","handleMarkerPointerMove","lastPoint","createPointFromMarkerEvent","originalEvent","frameRequester","requestFrame","eventTarget","getTouchedElementByPoint","range","getRangeCoveringLastSelectionAndPointInElement","makeSelectionFor","setMovedMarker","target","disableMarkerEvents","selectionAnchor","getSelectionAnchor","movedMarker","unsetMovedMarker","enableMarkerEvents","element","body","doc","defaultView","parentWindow","getEndAnchorOf","lastSelectionRange","getStartAnchorOf","disableNativeSelectionFor","userSelectBeforeEnablingSelection","css","restoreNativeSelectionFor","pointerEvent","getTargetElementFromPointerEvent","isMarker","point","createPointFromEvent","shift","getRangeWrappingWordAtPoint","rangeDiffersFromLastSelection","drawSelectionRange","onSelectionChange","showMarkers","doesRangeExist","hideMarkers","selectionDrawer","createRange","refreshSelection","redraw","adjustMarkerPositionsTo","hasEndOtherThanLastSelectionEnd","compareBoundaryPoints","Range","END_TO_END","hasStartOtherThanLastSelectionStart","START_TO_START","rects","getClientRects","firstRect","lastRect","length","top","yToMarkersContext","bottom","left","xToMarkersContext","right","initMarkers","createMarkerInside","MARKER_START_CLASS","MARKER_END_CLASS","addClass","MARKER_MOVING_CLASS","removeClass","toggleMovedMarker","shouldConvertPointerEvent","translate","getVectorOfMarkersOrigin","scale","getScaleOfMarkersContext","options","CustomSelection","Lib","Point","origin","contextOrigin","x","offsetX","y","offsetY","touches","pointers","touchPoint","elementFromPoint","clientX","clientY","$parent","className","createElement","setAttribute","MARKER_CLASS","append","visibility","environment","isAndroidLowerThanKitkat","isAndroidStackBrowser","performEnvTests","env","EnvironmentChecker","isAppleDevice","isAndroidLowerThan","textNode","getFromElNodeContainingPoint","getFromTextNodeMinimalRangeContainingPoint","expandRangeToStartAfterTheWhitespaceOnLeft","expandRangeToEndBeforeTheWhitespaceOnRight","rangeStartsWithWhitespace","startOffset","setStart","startContainer","maxIndex","Math","max","endContainer","data","rangeEndsWithWhitespace","endOffset","setEnd","toString","charCodeAt","WHITESPACE_LIST","stringified","coveringRange","cloneRange","pointAnchor","convertPointInElementToAnchor","bound","getNewSelectionBoundary","protectedBound","getProtectedSelectionBoundary","applyTo","collapsed","applyOppositeTo","anchor","createStartBoundary","createEndBoundary","pointRange","getPointRangeFromElement","getClosestPointRangeFormElement","startIndex","endIndex","middle","rangeContainsPoint","StartBoundary","EndBoundary","container","offset","el","n","nodes","childNodes","i","nodeIsText","nodeContainsPoint","rect","j","rectContainsPoint","node","getRectsForNode","selectNode","rectContainsPointVertically","rectOrItsBoundsContainPointHorizontally","pageY","pageX","nodeType","Node","TEXT_NODE","nodeHasChildren","nearestOnTheLeftOfPoint","createNodeComparator","getBetterRect","getRectMoreOnTheRight","getBestRectFromNode","getRectNearestOnLeftOfPoint","nearestAbovePoint","getLowerRect","getRectNearestAbovePoint","closestNodeFound","searchTextNode","createRangeAtTheEndOfTheClosestNode","setClosestNodeAndRect","closestNode","closestRectInNode","comparator","subNode","searchNode","winner","rival","newWinner","nearestRivalRect","nearestWinnerRect","areDifferent","rectA","rectB","nearestRect","rectIsInTheSameLineOnLeft","arg1","arg2","lastRectInNode","document","pointAtRightBoundaryOfRect","defaults","window","fn","customSelection","extend","this","FrameRequester","SelectionDrawer","fillStyle","selectionColor","refreshCustomSelection","clearCustomSelection","disableCustomSelection",32,9,13,10,"jQuery","global","Boundary","_container","_offset","apply","arguments","prototype","Object","create","userAgent","navigator","userAgentMatch","regExp","exec","testUserAgent","test","isAndroid","versionString","expectedVersion","split","expectedMajor","Number","expectedMinor","actualVersion","actualMajor","actualMinor","_ticking","func","requestAnimationFrame","bind","touch","SHIFT_Y","vector","lastTime","vendors","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","id","setTimeout","clearTimeout","initCanvas","createCanvas","context","canvas","getContext","drawSelection","boundingClientRect","getBoundingClientRect","SUBPIXEL_OFFSET","save","beginPath","Array","forEach","call","width","height","closePath","fill","restore","yOffset","scrollTop","updateCanvasBounds","newBounds","style","CUSTOM_SELECTION_CANVAS_CLASS","CUSTOM_SELECTION_CANVAS_STYLE","appendChild","position","pointer-events","z-index","match"],"mappings":"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"}