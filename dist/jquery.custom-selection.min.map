{"version":3,"file":"jquery.custom-selection.min.js","sources":["jquery.custom-selection.js"],"names":["$","hammerAllowTextSelection","Hammer","defaults","cssProps","userSelect","enableTouchSelectionFor","$element","on","handleGlobalTouchMove","handleGlobalTouchEnd","hammer","handleGlobalTapHold","clearSelection","disableTouchSelectionFor","off","e","gesture","element","getTouchedElementFromEvent","point","getTouchPoint","wrapWithMarkersWordAtPoint","createSelection","rejectTouchEnd","jqueryEvent","isMarker","target","handleMarkerTouchMove","preventDefault","lastPoint","originalEvent","frameRequester","requestFrame","eventAnchor","getTouchedElementByPoint","mark","updateSelection","startMarker","endMarker","window","getSelection","removeAllRanges","detach","existInDOM","range","document","createRange","setStart","apply","getRangeBoundAt","setEnd","collapsed","addRange","offset","Math","max","getIndexOfElement","anchor","parentNode","i","arguments","length","touchEvent","CustomSelection","Lib","Point","touches","pointers","touchPoint","elementFromPoint","clientX","clientY","createMarker","kind","span","createElement","setAttribute","textNode","getFromElNodeContainingPoint","trimTextNodeWhileContainsPoint","putMarkerBeforeWhitespaceOnLeftOf","putMarkerBeforeWhitespaceOnRightOf","normalize","marker","node","nodeEndsWith","WHITESPACE","data","removeLastLetter","previousSibling","nodeIsText","putMarkerBefore","putMarkerAfter","nodeStartsWith","removeFirstLetter","nextSibling","subNode","splitText","letter","el","getClosestTextNodeFromEl","trimPosition","nodeContainsPoint","insertBefore","appendChild","elements","parentElement","childNodes","Array","prototype","indexOf","call","n","nodes","rect","rects","getRectsForNode","j","rectContainsPoint","selectNode","getClientRects","x","y","left","right","top","bottom","nodeType","Node","TEXT_NODE","getClosestNodeFromEl","closestNode","getNodeCloserToPoint","winner","rival","nearestWinnerRect","getRectNearestToPoint","nearestRivalRect","nearestRect","settings","markerClass","fn","customSelection","options","extend","this","FrameRequester","disableCustomSelection","jQuery","global","_ticking","func","requestAnimationFrame","bind","touch","pageX","pageY","lastTime","vendors","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","id","setTimeout","clearTimeout"],"mappings":"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"}