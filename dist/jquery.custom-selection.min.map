{"version":3,"file":"jquery.custom-selection.min.js","sources":["jquery.custom-selection.js"],"names":["$","useContextOf","$element","contextDocument","ownerDocument","contextWindow","getWindowOf","initializeHammerFor","hammer","Hammer","Manager","recognizers","Press","Tap","set","holdThreshold","settings","holdTimeout","enableTouchSelectionFor","startMarker","add","endMarker","on","handleMarkerTouchStart","getBodyOf","handleMarkerTouchMove","handleMarkerTouchMoveEnd","handleGlobalTouchEnd","handleGlobalTapHold","clearSelection","handleResize","disableTouchSelectionFor","off","destroy","e","srcEvent","preventDefault","stopPropagation","selectWordUnderPointer","jqueryEvent","rejectTouchEnd","handleMarkerPointerMove","lastPoint","createPointFromMarkerEvent","originalEvent","frameRequester","requestFrame","eventTarget","getTouchedElementByPoint","range","getRangeCoveringLastSelectionAndPointInElement","makeSelectionFor","setMovedMarker","target","selectionAnchor","getSelectionAnchor","movedMarker","unsetMovedMarker","lastSelectionRange","drawSelectionRange","toggleMovedMarker","removeClass","MARKER_MOVING_CLASS","addClass","getContextScale","scaleGetter","element","body","doc","defaultView","parentWindow","getEndAnchorOf","getStartAnchorOf","disableNativeSelectionFor","userSelectBeforeEnablingSelection","css","restoreNativeSelectionFor","pointerEvent","getTargetElementFromPointerEvent","isMarker","point","createPointFromEvent","shift","getRangeWrappingWordAtPoint","rangeDiffersFromLastSelection","onSelectionChange","showMarkers","hideMarkers","selectionDrawer","createRange","redraw","adjustMarkerPositionsTo","hasEndOtherThanLastSelectionEnd","compareBoundaryPoints","Range","END_TO_END","hasStartOtherThanLastSelectionStart","START_TO_START","rects","getClientRects","firstRect","lastRect","length","top","yToMarkersContext","bottom","left","xToMarkersContext","right","initMarkers","createMarkerInside","MARKER_START_CLASS","MARKER_END_CLASS","markersOriginOffset","getMarkersOriginOffset","translate","getVectorOfMarkersOrigin","scale","getScaleOfMarkersContext","options","CustomSelection","Lib","Point","offset","x","framesOffset","y","touches","pointers","touchPoint","elementFromPoint","clientX","clientY","$parent","className","createElement","setAttribute","MARKER_CLASS","append","visibility","hasTheSameOffsetParent","elementA","elementB","offsetParent","computeMarkerOffsetRelativeTo","Error","elementWindowOffset","getElementWindowOffset","markersWindowOffset","markersRelativeOriginOffset","getElementOriginOffset","elementRelativeOriginOffset","getScaledElementOriginOffset","relativeOriginOffset","getBoundingClientRect","win","computeFrameOffset","dimensions","frame","frameElement","frameRect","frameBodyRect","document","clientLeft","clientTop","parent","textNode","getFromElNodeContainingPoint","getFromTextNodeMinimalRangeContainingPoint","expandRangeToStartAfterTheWhitespaceOnLeft","expandRangeToEndBeforeTheWhitespaceOnRight","rangeStartsWithWhitespace","startOffset","setStart","startContainer","maxIndex","Math","max","endContainer","data","rangeEndsWithWhitespace","endOffset","setEnd","toString","charCodeAt","WHITESPACE_LIST","stringified","coveringRange","cloneRange","pointAnchor","convertPointInElementToAnchor","bound","getNewSelectionBoundary","protectedBound","getProtectedSelectionBoundary","applyTo","collapsed","applyOppositeTo","anchor","createStartBoundary","createEndBoundary","pointRange","getPointRangeFromElement","getClosestPointRangeFormElement","startIndex","endIndex","middle","rangeContainsPoint","StartBoundary","EndBoundary","container","el","n","nodes","childNodes","i","nodeIsText","nodeContainsPoint","rect","j","rectContainsPoint","node","getRectsForNode","selectNode","rectContainsPointVertically","rectOrItsBoundsContainPointHorizontally","isAppleDevice","pageY","pageX","nodeType","Node","TEXT_NODE","nodeHasChildren","nearestOnTheLeftOfPoint","createNodeComparator","getBetterRect","getRectMoreOnTheRight","getBestRectFromNode","getRectNearestOnLeftOfPoint","nearestAbovePoint","getLowerRect","getRectNearestAbovePoint","closestNodeFound","searchTextNode","createRangeAtTheEndOfTheClosestNode","setClosestNodeAndRect","closestNode","closestRectInNode","comparator","subNode","searchNode","winner","rival","newWinner","nearestRivalRect","nearestWinnerRect","areDifferent","rectA","rectB","nearestRect","rectIsInTheSameLineOnLeft","arg1","arg2","lastRectInNode","pointAtRightBoundaryOfRect","defaults","navigator","userAgent","match","window","fn","customSelection","extend","this","FrameRequester","SelectionDrawer","fillStyle","selectionColor","clearCustomSelection","disableCustomSelection",32,9,13,10,"jQuery","global","Boundary","_container","_offset","apply","arguments","prototype","Object","create","_ticking","func","requestAnimationFrame","bind","touch","SHIFT_Y","vector","lastTime","vendors","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","id","setTimeout","clearTimeout","initCanvas","createCanvas","context","canvas","getContext","drawSelection","boundingClientRect","SUBPIXEL_OFFSET","offsetX","offsetY","save","beginPath","Array","forEach","call","width","height","closePath","fill","restore","yOffset","scrollTop","updateCanvasBounds","newBounds","style","CUSTOM_SELECTION_CANVAS_CLASS","CUSTOM_SELECTION_CANVAS_STYLE","appendChild","position","pointer-events","z-index"],"mappings":"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"}