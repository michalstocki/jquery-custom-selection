{"version":3,"file":"jquery.custom-selection.min.js","sources":["jquery.custom-selection.js"],"names":["$","useContextOf","$element","contextDocument","ownerDocument","contextWindow","getWindowOf","initializeHammerFor","hammer","Hammer","Manager","recognizers","Press","Tap","set","holdThreshold","settings","holdTimeout","enableTouchSelectionFor","startMarker","add","endMarker","on","handleMarkerTouchStart","getBodyOf","handleMarkerTouchMove","handleMarkerTouchMoveEnd","handleGlobalTouchEnd","handleGlobalTapHold","clearSelection","disableTouchSelectionFor","off","destroy","e","srcEvent","preventDefault","stopPropagation","selectWordUnderPointer","jqueryEvent","rejectTouchEnd","handleMarkerPointerMove","lastPoint","createPointFromMarkerEvent","originalEvent","frameRequester","requestFrame","eventTarget","getTouchedElementByPoint","range","getRangeCoveringLastSelectionAndPointInElement","makeSelectionFor","setMovedMarker","target","selectionAnchor","getSelectionAnchor","movedMarker","unsetMovedMarker","toggleMovedMarker","removeClass","MARKER_MOVING_CLASS","addClass","element","body","doc","defaultView","parentWindow","getEndAnchorOf","lastSelectionRange","getStartAnchorOf","disableNativeSelectionFor","userSelectBeforeEnablingSelection","css","restoreNativeSelectionFor","pointerEvent","getTargetElementFromPointerEvent","isMarker","point","createPointFromEvent","shift","getRangeWrappingWordAtPoint","rangeDiffersFromLastSelection","drawSelectionRange","onSelectionChange","showMarkers","doesRangeExist","hideMarkers","selectionDrawer","createRange","refreshSelection","redraw","adjustMarkerPositionsTo","hasEndOtherThanLastSelectionEnd","compareBoundaryPoints","Range","END_TO_END","hasStartOtherThanLastSelectionStart","START_TO_START","rects","getClientRects","firstRect","lastRect","length","top","yToMarkersContext","bottom","left","xToMarkersContext","right","initMarkers","createMarkerInside","MARKER_START_CLASS","MARKER_END_CLASS","translate","getVectorOfMarkersOrigin","scale","getScaleOfMarkersContext","options","CustomSelection","Lib","Point","origin","contextOrigin","x","offsetX","y","offsetY","touches","pointers","touchPoint","elementFromPoint","clientX","clientY","$parent","className","createElement","setAttribute","MARKER_CLASS","append","visibility","textNode","getFromElNodeContainingPoint","getFromTextNodeMinimalRangeContainingPoint","expandRangeToStartAfterTheWhitespaceOnLeft","expandRangeToEndBeforeTheWhitespaceOnRight","rangeStartsWithWhitespace","startOffset","setStart","startContainer","maxIndex","Math","max","endContainer","data","rangeEndsWithWhitespace","endOffset","setEnd","toString","charCodeAt","WHITESPACE_LIST","stringified","coveringRange","cloneRange","pointAnchor","convertPointInElementToAnchor","bound","getNewSelectionBoundary","protectedBound","getProtectedSelectionBoundary","applyTo","collapsed","applyOppositeTo","anchor","createStartBoundary","createEndBoundary","pointRange","getPointRangeFromElement","getClosestPointRangeFormElement","startIndex","endIndex","middle","rangeContainsPoint","StartBoundary","EndBoundary","container","offset","el","n","nodes","childNodes","i","nodeIsText","nodeContainsPoint","rect","j","rectContainsPoint","node","getRectsForNode","selectNode","rectContainsPointVertically","rectOrItsBoundsContainPointHorizontally","isAppleDevice","pageY","pageX","nodeType","Node","TEXT_NODE","nodeHasChildren","nearestOnTheLeftOfPoint","createNodeComparator","getBetterRect","getRectMoreOnTheRight","getBestRectFromNode","getRectNearestOnLeftOfPoint","nearestAbovePoint","getLowerRect","getRectNearestAbovePoint","closestNodeFound","searchTextNode","createRangeAtTheEndOfTheClosestNode","setClosestNodeAndRect","closestNode","closestRectInNode","comparator","subNode","searchNode","winner","rival","newWinner","nearestRivalRect","nearestWinnerRect","areDifferent","rectA","rectB","nearestRect","rectIsInTheSameLineOnLeft","arg1","arg2","lastRectInNode","document","pointAtRightBoundaryOfRect","defaults","navigator","userAgent","match","window","fn","customSelection","extend","this","FrameRequester","SelectionDrawer","fillStyle","selectionColor","refreshCustomSelection","clearCustomSelection","disableCustomSelection",32,9,13,10,"jQuery","global","Boundary","_container","_offset","apply","arguments","prototype","Object","create","_ticking","func","requestAnimationFrame","bind","touch","SHIFT_Y","vector","lastTime","vendors","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","id","setTimeout","clearTimeout","initCanvas","createCanvas","context","canvas","getContext","drawSelection","boundingClientRect","getBoundingClientRect","SUBPIXEL_OFFSET","save","beginPath","Array","forEach","call","width","height","closePath","fill","restore","yOffset","scrollTop","updateCanvasBounds","newBounds","style","CUSTOM_SELECTION_CANVAS_CLASS","CUSTOM_SELECTION_CANVAS_STYLE","appendChild","position","pointer-events","z-index"],"mappings":"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"}