/*! CustomSelection - v0.1.0 - 2014-07-24 */
!function(a){function b(a){$(a).on("touchstart",d).on("touchmove",e).on("touchend",f)}function c(a){$(a).off("touchstart",d).off("touchmove",e).off("touchend",f)}function d(a){a=a.originalEvent,g();var b=j(a),c=i(a);l(b,c)}function e(a){a.preventDefault(),a=a.originalEvent,G=i(a),D.requestFrame(function(){var a=k(G);m(a,G)})}function f(){h()}function g(){window.getSelection().removeAllRanges(),$("."+B).remove(),$("."+C).remove()}function h(){if(!E.parentNode||!F.parentNode)return null;var a=document.createRange(),b=E.parentNode,c=F.parentNode,d=r(E),e=r(F);a.setStart(b,d),a.setEnd(c,e),a.collapsed&&(a.setStart(c,e),a.setEnd(b,d)),window.getSelection().addRange(a),console.log("sA, eA, sO, eO",b,c,d,e)}function i(a){return new CustomSelection.Lib.Point(a)}function j(a){return a.touches[0].target}function k(a){return document.elementFromPoint(a.clientX,a.clientY)}function l(a,b){E=E||n(B),o(a,b,E)}function m(a,b){F=F||n(C),o(a,b,F)}function n(a){var b=document.createElement("span");return b.setAttribute("class",a),b}function o(a,b,c){var d;if(d=s(a,b)){for(;d.length>1;){var e=d.length>>1,f=d.splitText(e);t(f,b)&&(d=f)}p(d,c)}else{if(!(d=x(a,b)))return null;q(d,c)}c.parentNode.normalize()}function p(a,b){a.parentNode.insertBefore(b,a)}function q(a,b){a.nextSibling?a.parentNode.insertBefore(b,a.nextSibling):a.parentNode.appendChild(b)}function r(a){var b=a.parentElement.childNodes;return Array.prototype.indexOf.call(b,a)}function s(a,b){for(var c,d=a.childNodes,e=0;c=d[e++];)if(w(c)&&t(c,b))return c}function t(a,b){for(var c,d=u(a),e=0;c=d[e++];)if(v(c,b))return!0}function u(a){var b=document.createRange();return b.selectNode(a),b.getClientRects()}function v(a,b){var c=b.clientX,d=b.clientY;return c>a.left&&c<a.right&&d>a.top&&d<a.bottom}function w(a){return a.nodeType===Node.TEXT_NODE&&a.length}function x(a,b){for(var c,d=a;c=y(d,b);){if(w(c))return c;d=c}return null}function y(a,b){for(var c,d=a.childNodes,e=null,f=0;c=d[f++];){var g;(g=u(c))&&g.length&&(e=e||c,e=z(b,e,c))}return e}function z(a,b,c){var d=A(b,a),e=A(c,a);return e&&d&&e!==d&&e.top>=d.top?c:b}function A(a,b){for(var c,d=b.clientY,e=u(a),f=null,g=0;c=e[g++];)c.top<d&&(f=f||c,f!==c&&c.top>=f.top&&(f=c));return f}var B="start-marker",C="end-marker",D=null;a.CustomSelection={enable:function(a,c){c&&(B=c.startMarkerClass||B,C=c.endMarkerClass||C,b(a)),D=new CustomSelection.Lib.FrameRequester},disable:function(a){c(a),g()},Lib:{}};var E=null,F=null,G=null}(this),function(a){"use strict";function b(){this._ticking=!1}b.prototype.requestFrame=function(a){this._ticking||window.requestAnimationFrame(function(){a(),this._ticking=!1}.bind(this)),this._ticking=!0},a.CustomSelection.Lib.FrameRequester=b}(this),function(a){"use strict";function b(a){var b=a.touches[0];this.clientX=b.clientX,this.clientY=b.clientY,this.pageX=b.pageX,this.pageY=b.pageY}a.CustomSelection.Lib.Point=b}(this),function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();
//# sourceMappingURL=custom-selection.min.map