{"version":3,"file":"custom-selection.min.js","sources":["custom-selection.js"],"names":["global","enableTouchSelectionFor","element","$","hammer","bind","handleTapHold","disableTouchSelectionFor","unbind","e","gesture","getTouchedElementFromEvent","point","getTouchPoint","clearSelection","wrapWithMarkersWordAtPoint","createSelection","window","getSelection","removeAllRanges","startMarkerClass","remove","endMarkerClass","startMarker","parentNode","endMarker","range","document","createRange","startAnchor","endAnchor","startOffset","getIndexOfElement","endOffset","setStart","setEnd","collapsed","console","log","addRange","touchEvent","CustomSelection","Lib","Point","touches","pointers","target","createMarker","kind","span","createElement","setAttribute","textNode","getFromElNodeContainingPoint","length","trimPosition","subNode","splitText","nodeContainsPoint","potentialSpace","data","previousSibling","nodeIsText","putMarkerBefore","putMarkerAfter","nextSibling","normalize","node","marker","insertBefore","appendChild","elements","parentElement","childNodes","Array","prototype","indexOf","call","el","n","nodes","i","rect","rects","getRectsForNode","j","rectContainsPoint","selectNode","getClientRects","x","clientX","y","clientY","left","right","top","bottom","nodeType","Node","TEXT_NODE","frameRequester","enable","options","FrameRequester","disable","this","_ticking","requestFrame","func","requestAnimationFrame","touch","pageX","pageY","lastTime","vendors","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout"],"mappings":"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"}