{"version":3,"file":"custom-selection.min.js","sources":["custom-selection.js"],"names":["global","bindTouchFor","element","$","on","handleTouchStart","handleTouchMove","handleTouchEnd","unbindTouchFor","off","e","originalEvent","clearSelection","eventAnchor","getTouchedElementFromEvent","point","getTouchPoint","markStart","preventDefault","lastPoint","requestTick","getTouchedElementByPoint","markEnd","ticking","console","log","startAnchor","endAnchor","startOffset","endOffset","createSelection","window","getSelection","removeAllRanges","startMarkerClass","remove","endMarkerClass","range","document","createRange","setStart","setEnd","addRange","touchEvent","touch","touches","clientX","clientY","pageX","pageY","target","touchPoint","elementFromPoint","startMarker","createMarker","markerOffset","mark","parentNode","endMarker","kind","span","createElement","setAttribute","func","requestAnimationFrame","el","marker","textNode","getFromElNodeContainingPoint","length","trimPosition","subNode","splitText","nodeContainsPoint","putMarkerBefore","getClosestTextNodeFromEl","putMarkerAfter","normalize","getIndexOfElement","node","insertBefore","nextSibling","appendChild","elements","parentElement","childNodes","Array","prototype","indexOf","call","n","nodes","i","nodeIsText","rect","rects","getRectsForNode","j","rectContainsPoint","selectNode","getClientRects","x","y","left","right","top","bottom","nodeType","Node","TEXT_NODE","getClosestNodeFromEl","closestNode","getNodeCloserToPoint","winner","rival","nearestWinnerRect","getRectNearestToPoint","nearestRivalRect","nearestRect","CustomSelection","enable","options","disable","this"],"mappings":"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"}